

<!DOCTYPE html>
<html class="writer-html5" lang="is" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>5. Dæmi um hagnýtingu línulegrar algebru &mdash; Stærðfræðigreining I (STÆ104G) 2021</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/togglebutton.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom_admonitions.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon_2.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/togglebutton.js"></script>
        <script >var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

<!-- hoverrole.py css code -->
<style type="text/css">
  a.tooltip {outline:none; border-bottom: thin dotted; background: #ffeedd}
  a.tooltip strong {line-height:30px;}
  a.tooltip:hover {text-decoration:none;} 
  a.tooltip span {
      z-index:10;display:none; padding:14px 20px;
      margin-top:-30px; margin-left:12px;
      width:310px; line-height:16px;
  }
  a.tooltip:hover span{
      display:inline; position:absolute; color:#111;
      border:1px solid #DCA; background:#fffAF0;}
  .callout {z-index:20;position:absolute;top:30px;border:0;left:-12px;}
  
  /*CSS3*/
  a.tooltip span
  {
      border-radius:4px;
      box-shadow: 5px 5px 8px #CCC;
  }
</style>
<!-- End hoverrole.py css code -->

<style type="text/css">
  .sagecell .CodeMirror-scroll {
      overflow-y: hidden;
      overflow-x: auto;
  }
  .sagecell .CodeMirror {
      height: auto;
  }

  /* - Begin equation reference style - */
  h6.eqno{
      display: inline-block;
      padding-left: 10px;
  }

  h6 .headerlink{
      display: inline-block !important;
  }
  h6 .headerlink:after{
      visibility: hidden !important;
  }
  h6 .headerlink:hover:after{
      visibility: visible !important;
  }
  .eqno:hover > .headerlink:after{
      visibility: visible !important;
  }

  table > caption > .headerlink{
      visibility: hidden !important;
  }

  table > caption > .headerlink{
      visibility: hidden !important;
  }
  /* - End - */

</style>
<style type="text/css">
  /* .ace_content .ace_layer .ace_line_group .ace_line * { */
  /*     font-size: 15px !important; */
  /* } */
  /* div[class^='highlight'] pre {font-size:15px} */
  div.code-block-caption{margin-bottom: 4px}
</style>

    <link rel="index" title="Atriðaskrá" href="genindex.html" />
    <link rel="search" title="Leit" href="search.html" />
    <link rel="prev" title="4. Línuleg algebra" href="kafli04.html" />



<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script type="text/javascript" src="https://cdn.geogebra.org/apps/deployggb.js"></script>


 

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Stærðfræðigreining I (STÆ104G)
          

          
            
            <img src="_static/hi_horiz_raunvisindadeild.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2021
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="kafli01.html">1. Forritun í Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="kafli02.html">2. NumPy, Pandas og Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="kafli03.html">3. Föll af mörgum breytistærðum</a></li>
<li class="toctree-l1"><a class="reference internal" href="kafli04.html">4. Línuleg algebra</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">5. Dæmi um hagnýtingu línulegrar algebru</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#skipting-i-hopa-ea-flokkun">5.1. Skipting í hópa eða flokkun</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#daemi-um-flokkun-tvivira-vigra">5.1.1. Dæmi um flokkun tvívíðra vigra</a></li>
<li class="toctree-l3"><a class="reference internal" href="#daemi-um-hagnytingu-flokkunar">5.1.2. Dæmi um hagnýtingu flokkunar</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rithattur-fyrir-flokkun">5.1.3. Ritháttur fyrir flokkun</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mipunktar-hopa">5.1.4. Miðpunktar hópa</a></li>
<li class="toctree-l3"><a class="reference internal" href="#besta-hopaskipting">5.1.5. Besta hópaskipting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#k-means-reikniriti">5.1.6. <em>k-means</em> reikniritið</a></li>
<li class="toctree-l3"><a class="reference internal" href="#daemi-um-nokkrar-k-means-itrekanir">5.1.7. Dæmi um nokkrar k-means-ítrekanir</a></li>
<li class="toctree-l3"><a class="reference internal" href="#forvinnsla-vigra-me-whiten">5.1.8. Forvinnsla vigra með <code class="code docutils literal notranslate"><span class="pre">whiten</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#fylkjamargfoldun-og-tolvugrafik">5.2. Fylkjamargföldun og tölvugrafík</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fylki-og-net">5.3. Fylki og net</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#net-hnutar-og-leggir">5.3.1. Net, hnútar og leggir</a></li>
<li class="toctree-l3"><a class="reference internal" href="#grannafylki">5.3.2. Grannafylki</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vegir-i-netum">5.3.3. Vegir í netum</a></li>
<li class="toctree-l3"><a class="reference internal" href="#legufylki">5.3.4. Legufylki</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flaeinet">5.3.5. Flæðinet</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lindir-og-osar">5.3.6. Lindir og ósar</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#linuleg-hreyfikerfi">5.4. Línuleg hreyfikerfi</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#skilgreining-linulegra-hreyfikerfa">5.4.1. Skilgreining línulegra hreyfikerfa</a></li>
<li class="toctree-l3"><a class="reference internal" href="#roun-mannfjolda-ea-stofnstaerar">5.4.2. Þróun mannfjölda eða stofnstærðar</a></li>
<li class="toctree-l3"><a class="reference internal" href="#diffurjafna-fyrir-hreyfingu-hlutar">5.4.3. Diffurjafna fyrir hreyfingu hlutar</a></li>
<li class="toctree-l3"><a class="reference internal" href="#diffurjofnu-breytt-i-linulegt-hreyfikerfi">5.4.4. Diffurjöfnu breytt í línulegt hreyfikerfi</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Stærðfræðigreining I (STÆ104G)</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">5. </span>Dæmi um hagnýtingu línulegrar algebru</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="daemi-um-hagnytingu-linulegrar-algebru">
<h1><span class="section-number">5. </span>Dæmi um hagnýtingu línulegrar algebru<a class="headerlink" href="#daemi-um-hagnytingu-linulegrar-algebru" title="Varanlegur hlekkur á titilinn">¶</a></h1>
<div class="section" id="skipting-i-hopa-ea-flokkun">
<h2><span class="section-number">5.1. </span>Skipting í hópa eða flokkun<a class="headerlink" href="#skipting-i-hopa-ea-flokkun" title="Varanlegur hlekkur á titilinn">¶</a></h2>
<p>Í þessari grein verður fjallað um aðferðir til að <strong>flokka</strong> (<em>cluster</em>,
<em>partition</em>) vigra í <strong>hópa</strong> (<em>groups</em>) þannig að vigrarnir í hverjum hóp séu
líkir hver öðrum, en vigrar í mismunandi hópum séu ekki eins líkir. Verkefni af
þessu tagi er nefnt <em>clustering</em> á ensku. Sér í lagi verður farið í hið
velþekkta <strong>k-means</strong> reiknirit (oftast er bara talað um <em>k-means</em> og ekki reynt
að þýða). Stundum er talað um að flokka <em>mælingar</em> (<em>observations</em>), <em>punkta</em>,
<em>einstaklinga</em> eða <em>hluti</em>, og þegar búið er að flokka má tala um <em>meðlimi</em> í
hópum. Orðið <strong>einkenni</strong> (<em>feature</em>) er oft notað um einstök stök í vigrunum
sem eru flokkaðir.</p>
<div class="section" id="daemi-um-flokkun-tvivira-vigra">
<h3><span class="section-number">5.1.1. </span>Dæmi um flokkun tvívíðra vigra<a class="headerlink" href="#daemi-um-flokkun-tvivira-vigra" title="Varanlegur hlekkur á titilinn">¶</a></h3>
<p>Á eftirfarandi mynd er dæmi um flokkun tvívíðra vigra, sem sé punkta í planinu.</p>
<div class="figure align-center" id="flokkun300">
<a class="reference internal image-reference" href="_images/flokkunardæmi300.png"><img alt="_images/flokkunardæmi300.png" src="_images/flokkunardæmi300.png" style="width: 12cm;" /></a>
<p class="caption"><span class="caption-number">Mynd 5.1: </span><span class="caption-text">Skipting 300 punkta í þrjá hópa</span><a class="headerlink" href="#flokkun300" title="Varanlegur hlekkur á þessa mynd">¶</a></p>
</div>
<p>Einn vandi við slíka flokkun er að ákvarða hópafjöldann, sem hefðbundið er að
nefna <span class="math notranslate nohighlight">\(k\)</span>. Það sem er óvenjulegt við dæmið á myndinni er að vídd punktanna
er <span class="math notranslate nohighlight">\(n = 2\)</span> og því er auðvelt að teikna punktasafnið. Í þessu dæmi er líka
auðvelt að sjá af myndinni að <span class="math notranslate nohighlight">\(k = 3\)</span> er góð tala, en þetta er ekki svona
auðvelt fyrir hærri víddir og jafnvel heldur ekki fyrir önnur tvívíð dæmi.</p>
</div>
<div class="section" id="daemi-um-hagnytingu-flokkunar">
<h3><span class="section-number">5.1.2. </span>Dæmi um hagnýtingu flokkunar<a class="headerlink" href="#daemi-um-hagnytingu-flokkunar" title="Varanlegur hlekkur á titilinn">¶</a></h3>
<p><strong>Flokkun texta eftir umfjöllunarefni.</strong> Hér er nærtækt að taka dæmið um
Wikipedia-greinarnar sem voru á dagskrá í Skilaverkefni 7, þar sem unnið var með
tíðni 1000 orða í 300 Wikipedia-greinum sem fjölluðu um fimm mismunandi
efnisflokka, Pokemon, veðurfræði, listir, stofnanir Sameinuðu þjóðanna, og
rafmagnsverkfræði. Góður flokkari ætti að geta fundið (endurskapað) flokkunina,
a.m.k. komist nálægt henni útfrá orðtíðnigögnunum einum saman, sérstaklega ef
við festum <span class="math notranslate nohighlight">\(k = 5\)</span>.</p>
<p><strong>Flokkun sjúklinga.</strong> Ef <span class="math notranslate nohighlight">\(x_i\)</span> er vigur af einkennum sjúklings númer <span class="math notranslate nohighlight">\(i\)</span>
(t.d. aldur, kyn, BMI, og sjúkdómseinkenni af ýmsu tagi) þá gætti verið gagnlegt
að flokka sjúklingana í hópa með svipuð einkenni.</p>
<p><strong>Flokkun viðskiptavina.</strong> Gerum ráð fyrir að <span class="math notranslate nohighlight">\(j\)</span>-ta stak <span class="math notranslate nohighlight">\(x_i\)</span> sé
magn af vöru <span class="math notranslate nohighlight">\(j\)</span> sem kúnni númer <span class="math notranslate nohighlight">\(i\)</span> keypti á tilteknu tímabili. Þá
mætti flokka kúnnana í <span class="math notranslate nohighlight">\(k\)</span> hópa og svo mætti beina sömu auglýsingum til
þeirra sem eru í sama hóp, eða t.d. auglýsingum um það sem aðrir í hópnum hafa
keypt en þeir ekki.</p>
<p>Auðvelt er að búa til allskonar dæmi af sama tagi: Skipting nemenda í flokka
eftir einkunnum og námsbraut (þá mætti t.d. búa til verkefnahópa með einum úr
hverjum flokki til að fá fjölbreytni í hópana), flokkun svæða eftir veðurfari,
flokkun fyrirtækja eftir ýmsum eiginleikum, o.s.frv.</p>
<p>Í sumum tilvikum er ekkert unnið frekar með flokkana, heldur er tilgangur
flokkunarinnar einfaldlega sá að átta sig betur á gagnasafni.</p>
</div>
<div class="section" id="rithattur-fyrir-flokkun">
<h3><span class="section-number">5.1.3. </span>Ritháttur fyrir flokkun<a class="headerlink" href="#rithattur-fyrir-flokkun" title="Varanlegur hlekkur á titilinn">¶</a></h3>
<p>Við látum <span class="math notranslate nohighlight">\(N\)</span> tákna fjölda punkta eða <span class="math notranslate nohighlight">\(n\)</span>-vigra sem á að skipta í
<span class="math notranslate nohighlight">\(k\)</span> hópa og látum svo <span class="math notranslate nohighlight">\(G_j\)</span> vera mengi með númerum þeirra punkta
sem eru i <span class="math notranslate nohighlight">\(j\)</span>-ta hópnum. Tökum sem dæmi að 7 punktum sé skipt í 3
hópa, með <span class="math notranslate nohighlight">\(x_1\)</span>, <span class="math notranslate nohighlight">\(x_3\)</span> og <span class="math notranslate nohighlight">\(x_5\)</span> í fyrsta hópnum,
<span class="math notranslate nohighlight">\(x_2\)</span> og <span class="math notranslate nohighlight">\(x_4\)</span> í hópi 2 og <span class="math notranslate nohighlight">\(x_6\)</span> og <span class="math notranslate nohighlight">\(x_7\)</span> í þeim
þriðja. Þá verður:</p>
<div class="math notranslate nohighlight">
\[G_1 = \{1, 3, 5\},\quad G_2 = \{2, 4\}\quad\text{og}\quad G_3 = \{6, 7\}\]</div>
<p>Við skilgreinum líka vigur <span class="math notranslate nohighlight">\(c\)</span> með <span class="math notranslate nohighlight">\(c_i = {}\)</span> númer hópsins sem
<span class="math notranslate nohighlight">\(x_i\)</span> lendir í. Fyrir dæmið okkar verður</p>
<div class="math notranslate nohighlight">
\[c = (1, 2, 1, 2, 1, 3, 3)\]</div>
<p>Vigurinn <span class="math notranslate nohighlight">\(c\)</span> svarar til Python-breytunnar <code class="code docutils literal notranslate"><span class="pre">code</span></code> í grein <a class="reference internal" href="#kmeans"><span class="std std-numref">5.1.6</span></a>.</p>
</div>
<div class="section" id="mipunktar-hopa">
<span id="id1"></span><h3><span class="section-number">5.1.4. </span>Miðpunktar hópa<a class="headerlink" href="#mipunktar-hopa" title="Varanlegur hlekkur á titilinn">¶</a></h3>
<p><strong>Miðpunktur</strong> (<em>centroid</em>) fyrir hóp er punktur sem líkist punktunum í hópnum,
en hann þarf samt ekki að vera sjálfur í hópnum. Í k-means reikniritinu sem við
lýsum nákvæmlega hér að neðan er miðpunktur hóps reiknaður sem meðaltal af öllum
punktum í hópnum. Ef <span class="math notranslate nohighlight">\(G_1,\ldots,G_k\)</span> er flokkun <span class="math notranslate nohighlight">\(x_1,\ldots,x_N\)</span> og stærð
<span class="math notranslate nohighlight">\(j\)</span>-ta hópsins er <span class="math notranslate nohighlight">\(p_j\)</span> þá má reikna miðpunkta hópanna með:</p>
<div class="math notranslate nohighlight">
\[\begin{split}&amp;\textit{Reikna-miðpunkta:}\\[3pt]
&amp;\textbf{Fyrir } j = 1,\ldots,k: \\
&amp;\qquad m_j := \frac{1}{p_j} \sum_{i \in G_j}{} x_i\end{split}\]</div>
<p>Í tvívíðu og þrívíðu rúmi þá er miðpunktur reiknaður með þessum hætti sá sami
og eðlisfræðileg þungamiðja punktasafnsins. Ef þungir hlutir væru festir á létt
(tvívítt) spjald, á staði sem svara til punktasafns, þá mundi spjaldið
ballansera á þungamiðjunni. Athugið að fyrir þrívíða punkta t.d. er hægt að láta
<span class="math notranslate nohighlight">\(\overline x\)</span>, <span class="math notranslate nohighlight">\(\overline y\)</span> og <span class="math notranslate nohighlight">\(\overline z\)</span> vera meðaltöl
<span class="math notranslate nohighlight">\(x\)</span>-, <span class="math notranslate nohighlight">\(y\)</span>- og <span class="math notranslate nohighlight">\(z\)</span>-hnita punktanna og þá verður
<span class="math notranslate nohighlight">\((\overline x, \overline y, \overline z)\)</span> miðpunkturinn.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/þungamiðja.png"><img alt="_images/þungamiðja.png" src="_images/þungamiðja.png" style="width: 7cm;" /></a>
</div>
<div class="admonition important">
<p class="admonition-title">Sýnidæmi</p>
<p>Miðpunktur eða meðaltal <span class="math notranslate nohighlight">\(\{(1,3,4), (2,6,8), (3,6,9)\}\)</span> er
<span class="math notranslate nohighlight">\(\frac{1}{3}(1 + 2 + 3, 3 + 6 + 6, 4 + 8 + 9)\)</span> =
<span class="math notranslate nohighlight">\(\frac{1}{3}(6,15,21)\)</span> = <span class="math notranslate nohighlight">\((2,5,7)\)</span>.</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Æfing</p>
<p>Finnið miðpunkt fyrir punktana <span class="math notranslate nohighlight">\((1,1), (1,2), (2,4)\)</span> og <span class="math notranslate nohighlight">\((4,5)\)</span>.
Merkið punktana og meðaltalið inn í hnitakerfi.</p>
</div>
</div>
<div class="section" id="besta-hopaskipting">
<span id="id2"></span><h3><span class="section-number">5.1.5. </span>Besta hópaskipting<a class="headerlink" href="#besta-hopaskipting" title="Varanlegur hlekkur á titilinn">¶</a></h3>
<p>Fyrir <span class="math notranslate nohighlight">\(N\)</span> punkta, <span class="math notranslate nohighlight">\(x_1, \ldots, x_N\)</span> og <span class="math notranslate nohighlight">\(k\)</span> gefna
miðpunkta, <span class="math notranslate nohighlight">\(m_1, \ldots, m_k\)</span> er hægt að reikna svokallaða bestu
hópaskiptingu með eftirfarandi reikniriti:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\DeclareMathOperator*{\argmin}{argmin}
&amp;\textit{Besta-skipting:}\\[3pt]
&amp;G_h := \varnothing\;\; (h = 1,\ldots, k) \\
&amp;\textbf{Fyrir } i = 1,\ldots,N: \\
&amp;\qquad h := \argmin_{1 \leq j\leq k} \|x_i - m_j\| \\
&amp;\qquad G_h := G_h \cup \{i\}\end{split}\]</div>
<p>Með öðrum orðum finnum við fyrir hvern punkt þann miðpunkt sem er næstur og
setjum svo punktinn í tilsvarandi hóp. Stundum eru miðpunktarnir kallaðir
<em>fulltrúar</em> og þá má segja að hver einstaklingur lendi í hópi þess fulltrúa
sem er líkastur honum. Þetta minnir á kosningapróf sem ýmsir vefmiðlar bjóða í
aðdraganda kosninga, þar sem hægt er að finna út hvaða flokk maður ætti að kjósa
með því bera svör manns saman við svör frambjóðenda við sömu spurningum.</p>
<div class="admonition hint">
<p class="admonition-title">Æfing</p>
<p>Merkið 10 punkta af handahófi á blað ásamt 3 miðpunktum og búið til bestu
hópaskiptingu.</p>
</div>
</div>
<div class="section" id="k-means-reikniriti">
<span id="kmeans"></span><h3><span class="section-number">5.1.6. </span><em>k-means</em> reikniritið<a class="headerlink" href="#k-means-reikniriti" title="Varanlegur hlekkur á titilinn">¶</a></h3>
<p>Eftir undirbúning í síðustu tveimur greinum er framsetning <em>k-means</em>
reikniritsins afar einföld. Það felst einfaldlega í að reikna aftur og aftur
bestu skiptingu fyrir gefna miðpunkta, og endurreikna miðpunktana fyrir
skiptinguna sem kom út. Hér er þetta aðeins formlegra:</p>
<div class="math notranslate nohighlight">
\[\begin{split}&amp;\textit{k-means:}\\[3pt]
&amp;\text{Veljum einhverja miðpunkta }m_1, \ldots, m_k \\
&amp;\textbf{Lykkja}\text{ þar til samleitni náð:} \\
&amp;\qquad \text{Ákvörðum skiptingu með reikniriti }\textit{Besta-skipting}\\
&amp;\qquad \text{Ákvörðum nýja miðpunkta með reikniriti }\textit{Reikna-miðpunkta}\end{split}\]</div>
<p>Það eru ýmsar aðferðir til að velja upphafsgildi miðpunktanna í fyrsta skrefinu.
Ein einföld leið er að velja þá af handahófi úr punktasafninu, og önnur er sú að
skipta safninu af handahófi í <span class="math notranslate nohighlight">\(k\)</span> hópa og velja upphafsgildi <span class="math notranslate nohighlight">\(m_j\)</span>
sem meðaltal <span class="math notranslate nohighlight">\(j\)</span>-ta hóps. Samkvæmt <a class="reference external" href="https://en.wikipedia.org/wiki/K-means_clustering">Wikipedíugreininni um k-means</a> þá er aðferð kennd
við Bradley og Fayyad betri og sömuleiðis aðferð nefnd <em>k-means++</em>.</p>
<p>Markmiðið með reikniritinu er að reyna að finna skiptingu sem lágmarkar markfallið:</p>
<div class="math notranslate nohighlight">
\[d = \sum_{j=1}^k \sum_{i \in G_j} \|x_i - m_j\|^2\]</div>
<p>Hægt er að sýna fram á að markfallið minnkar eða stendur í stað í hverju skrefi,
og þar sem það er takmarkað að neðan (verður aldrei minna en 0) og það eru bara
endanlega margar flokkanir til þá kemur að því að við tökum skref sem breytir
markfallinu ekki. Oftast er ítrekuninni samt hætt fyrr, þegar markfallið
breytist um minna en einhver fyrirfram ákveðinn þröskuldur. Þetta gefur
nokkurskonar staðbundið lággildi, og stundum er reikniritið framkvæmt nokkrum
sinnum með mismunandi byrjunarval á miðpunktunum, og svo valin sú skipting sem
endar í besta gildi á markfallinu.</p>
<div class="admonition note">
<p class="admonition-title">Python</p>
<p>Í Scipy er pakki sem heitir <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/cluster.vq.html">scipy.cluster.vq</a> sem geymir
föll til að flokka vigra. Aðalfallið heitir <code class="code docutils literal notranslate"><span class="pre">kmeans</span></code> en auk þess eru
hjálparföll, sér í lagi <code class="code docutils literal notranslate"><span class="pre">vq</span></code> og <code class="code docutils literal notranslate"><span class="pre">whiten</span></code>. Scipy skjölunin kallar
vigrana sem flokkaðir eru <em>observations</em> (a.m.k. stundum) og stökin í þeim
<em>features</em>. Vörpun frá miðpunktum yfir í hópa er kölluð <em>code book</em> sem þýðir
upphaflega <em>dulmálslykill</em>. Hún er útfærð með fylki þar sem röð nr. <span class="math notranslate nohighlight">\(i\)</span> er
miðpunktur fyrir hóp nr. <span class="math notranslate nohighlight">\(i\)</span>. Orðið <em>code</em> er svo notað um <em>hópnúmer</em>.
Markfallið er kallað <em>distortion</em>. Eins og sést hér á eftir skilar fallið
<cite>kmeans</cite> bara miðpunktum fyrir flokkunargögn og svo þarf að kalla á <cite>vq</cite> til
að finna hópnúmer hvers og eins. Hér er dæmigerð notkun þessara falla:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.cluster.vq</span> <span class="kn">import</span> <span class="n">kmeans</span><span class="p">,</span> <span class="n">vq</span>
<span class="n">X</span> <span class="o">=</span> <span class="o">...</span>                  <span class="c1"># búa til gögn / lesa úr skrá</span>
<span class="n">k</span> <span class="o">=</span> <span class="mi">5</span>                    <span class="c1"># Fjöldi hópa</span>
<span class="p">(</span><span class="n">cb</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span> <span class="o">=</span> <span class="n">kmeans</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>    <span class="c1"># Skilar cb = codebook (5 línu fylki með miðpunktum)</span>
                         <span class="c1"># og d = lokagildi markfalls</span>
<span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">dvec</span><span class="p">)</span> <span class="o">=</span> <span class="n">vq</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">cb</span><span class="p">)</span> <span class="c1"># code[i] = hópnúmer vigurs í i-tu línu X,</span>
                         <span class="c1"># dvec[i] = fjarlægð hans frá sínum miðpunkti</span>
</pre></div>
</div>
</div>
<div class="admonition attention">
<p class="admonition-title">Athugið</p>
<p><cite>Vq</cite> stendur fyrir <em>vector quantization</em>, en bein þýðing væri
<em>vigurskömmtun</em>. Skömmtun (<em>quantization</em>) er hugtak í eðlisfræði sem snýst
t.d. um að orka rafeindar í vetnisatómi getur bara tekið tiltekin strjál
(<em>discrete</em>) gildi. Sama hugtak er svo notað í tölvunarfræði, t.d. þegar við
fækkum litum í litmynd úr milljónum í 256 eða 16, eða þegar við látum
þungamiðju eða miðpunkt hóps koma í stað hópsins alls.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Sýnidæmi</p>
<p>Hér er forrit sem býr til 30 slembipunkta í planinu og skiptir þeim svo í
3 hópa, og prentar út og teiknar niðurstöðuna. Miðpunktar eru teiknaðir með stjörnum.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># UNDIRBÚNINGUR</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span><span class="o">,</span> <span class="nn">numpy.random</span> <span class="k">as</span> <span class="nn">npr</span><span class="o">,</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">scipy.cluster.vq</span> <span class="kn">import</span> <span class="n">kmeans</span><span class="p">,</span> <span class="n">vq</span>
<span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">floatmode</span><span class="o">=</span><span class="s1">&#39;fixed&#39;</span><span class="p">,</span> <span class="n">suppress</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">npr</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">npr</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># FLOKKUN</span>
<span class="p">(</span><span class="n">cb</span><span class="p">,</span><span class="n">d</span><span class="p">)</span> <span class="o">=</span> <span class="n">kmeans</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">(</span><span class="n">code</span><span class="p">,</span><span class="n">dvec</span><span class="p">)</span> <span class="o">=</span> <span class="n">vq</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">cb</span><span class="p">)</span>

<span class="c1"># ÚTPRENTUN OG TEIKNING</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;codebook =</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">cb</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;markfall = </span><span class="si">{</span><span class="n">d</span><span class="si">:</span><span class="s1">.3f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;flokkun = </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">T</span>
<span class="p">(</span><span class="n">mx</span><span class="p">,</span><span class="n">my</span><span class="p">)</span> <span class="o">=</span> <span class="n">cb</span><span class="o">.</span><span class="n">T</span>  <span class="c1"># miðpunktar</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">code</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Úttak:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">codebook</span> <span class="o">=</span>
 <span class="p">[[</span><span class="mf">0.461</span> <span class="mf">0.866</span><span class="p">]</span>
 <span class="p">[</span><span class="mf">0.224</span> <span class="mf">0.291</span><span class="p">]</span>
 <span class="p">[</span><span class="mf">0.815</span> <span class="mf">0.409</span><span class="p">]]</span>
<span class="n">markfall</span> <span class="o">=</span> <span class="mf">0.198</span>
<span class="n">flokkun</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/kmeansdæmi.png"><img alt="_images/kmeansdæmi.png" src="_images/kmeansdæmi.png" style="width: 9cm;" /></a>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Python</p>
<p>Ef reynt er að flokka með <span class="math notranslate nohighlight">\(k &gt; 3\)</span> og teikna með <code class="code docutils literal notranslate"><span class="pre">scatter</span></code> eins og
í sýnidæminu verða litir hópanna ekki sérstaklega vel aðgreinanlegir.
Hér er undirbúingsforrit sem keyra má til að fá betra litaval. Það dugar upp
í <span class="math notranslate nohighlight">\(k = 9\)</span>.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.colors</span> <span class="k">as</span> <span class="nn">clrs</span>
<span class="k">def</span> <span class="nf">qcmap</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
    <span class="n">cmap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s1">&#39;Set1&#39;</span><span class="p">)(</span><span class="nb">range</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">k</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="n">cmap</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.95</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>  <span class="c1"># dekkja gula litinn</span>
    <span class="k">return</span> <span class="n">clrs</span><span class="o">.</span><span class="n">LinearSegmentedColormap</span><span class="o">.</span><span class="n">from_list</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="n">cmap</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
<p>Til að teikna er svo notað:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">qcmap</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="admonition hint">
<p class="admonition-title">Æfing</p>
<ol class="loweralpha simple">
<li><p>Afritið forritið í sýnidæminu og prófið að keyra það með 5 og 10 hópum.
Skoðið úttakið.</p></li>
<li><p>Keyrið nú reitinn að ofan sem skilgreinir <code class="code docutils literal notranslate"><span class="pre">qcmap</span></code> og leysið a-lið
aftur með því að hafa <code class="code docutils literal notranslate"><span class="pre">cmap=</span></code> með í scatter-skipuninni.</p></li>
</ol>
</div>
</div>
<div class="section" id="daemi-um-nokkrar-k-means-itrekanir">
<h3><span class="section-number">5.1.7. </span>Dæmi um nokkrar k-means-ítrekanir<a class="headerlink" href="#daemi-um-nokkrar-k-means-itrekanir" title="Varanlegur hlekkur á titilinn">¶</a></h3>
<p>Til glöggvunar fylgja hér nokkrar myndir af niðurstöðum reikniritanna
<em>Besta-skipting</em> (t.v. í hverri mynd; sjá grein <a class="reference internal" href="#besta-hopaskipting"><span class="std std-numref">5.1.5</span></a>) og
<em>Reikna-miðpunkta</em> (t.h. í hverri mynd; sjá grein <a class="reference internal" href="#mipunktar-hopa"><span class="std std-numref">5.1.4</span></a>) þegar
k-means reikniritinu er beitt á dæmið sem sýnt er á <a class="reference internal" href="#flokkun300"><span class="std std-numref">Mynd 5.1:</span></a>.
Miðpunktar eru sýndir með ferningum</p>
<div class="figure align-center" id="id4">
<a class="reference internal image-reference" href="_images/ítrekun1.png"><img alt="_images/ítrekun1.png" src="_images/ítrekun1.png" style="width: 13cm;" /></a>
<p class="caption"><span class="caption-number">Mynd 5.2: </span><span class="caption-text">Dæmi um k-means, ítrekun 1</span><a class="headerlink" href="#id4" title="Varanlegur hlekkur á þessa mynd">¶</a></p>
</div>
<div class="figure align-center" id="id5">
<a class="reference internal image-reference" href="_images/ítrekun2.png"><img alt="_images/ítrekun2.png" src="_images/ítrekun2.png" style="width: 13cm;" /></a>
<p class="caption"><span class="caption-number">Mynd 5.3: </span><span class="caption-text">Dæmi um k-means, ítrekun 2</span><a class="headerlink" href="#id5" title="Varanlegur hlekkur á þessa mynd">¶</a></p>
</div>
<div class="figure align-center" id="id6">
<a class="reference internal image-reference" href="_images/ítrekun10.png"><img alt="_images/ítrekun10.png" src="_images/ítrekun10.png" style="width: 13cm;" /></a>
<p class="caption"><span class="caption-number">Mynd 5.4: </span><span class="caption-text">Dæmi um k-means, ítrekun 10</span><a class="headerlink" href="#id6" title="Varanlegur hlekkur á þessa mynd">¶</a></p>
</div>
<div class="figure align-center" id="id7">
<a class="reference internal image-reference" href="_images/eftir-ítrekun-15.png"><img alt="_images/eftir-ítrekun-15.png" src="_images/eftir-ítrekun-15.png" style="width: 6cm;" /></a>
<p class="caption"><span class="caption-number">Mynd 5.5: </span><span class="caption-text">Dæmi um k-means, eftir 15 ítrekanir</span><a class="headerlink" href="#id7" title="Varanlegur hlekkur á þessa mynd">¶</a></p>
</div>
<p>Lokamyndin er sú sama og er í byrjun kaflans (<a class="reference internal" href="#flokkun300"><span class="std std-numref">Mynd 5.1:</span></a>). Hér er mynd sem sýnir hvernig markfallið (á <span class="math notranslate nohighlight">\(y\)</span>-ás) þróast með númeri
ítrekunar (á <span class="math notranslate nohighlight">\(x\)</span>-ás).</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/kmeansmarkfall.png"><img alt="_images/kmeansmarkfall.png" src="_images/kmeansmarkfall.png" style="width: 7cm;" /></a>
</div>
</div>
<div class="section" id="forvinnsla-vigra-me-whiten">
<h3><span class="section-number">5.1.8. </span>Forvinnsla vigra með <code class="code docutils literal notranslate"><span class="pre">whiten</span></code><a class="headerlink" href="#forvinnsla-vigra-me-whiten" title="Varanlegur hlekkur á titilinn">¶</a></h3>
<p>Ef stökin í vigrunum sem á að flokka hafa mjög mismunandi stærðargráðu getur
borgað sig að skala þau. Tökum sem dæmi að við ætlum að flokka menn eftir hæð og
þyngd, og hæðin sé í metrum en þyngdin í kílóum. Ef ekkert er gert mundu hæðirnar
hafa lítil sem engin áhrif á röðun í hópa. Hér væri hægt að staðla hæð og þyngd
með því að deila með staðalfrávikum hvors um sig áður en flokkað er.</p>
<div class="admonition note">
<p class="admonition-title">Python</p>
<p>Eitt af því sem vq-pakkinn býður upp á er fallið <code class="code docutils literal notranslate"><span class="pre">whiten</span></code> sem staðlar
hvert einkenni (hnit) með því að deila með staðalfráviki þess, svo
öll einkennin hafi staðalfrávik 1. Þannig mætti byrja forritsbútinn í síðustu
grein á:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.cluster.vq</span> <span class="kn">import</span> <span class="n">kmeans</span><span class="p">,</span> <span class="n">vq</span><span class="p">,</span> <span class="n">whiten</span>
<span class="n">X</span> <span class="o">=</span> <span class="o">...</span>                  <span class="c1"># búa til gögn / lesa úr skrá</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">whiten</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>            <span class="c1"># staðla gögn</span>
<span class="o">...</span>
</pre></div>
</div>
</div>
<div class="admonition attention">
<p class="admonition-title">Athugið</p>
<p>Annar vinsæll Python-pakki sem m.a. getur flokkað er <em>Scikit-learn</em> (fluttur
inn með <code class="code docutils literal notranslate"><span class="pre">import</span> <span class="pre">sklearn.cluster</span></code> o.fl.). Þar er m.a. að finna mjög
vinsælan flokkara sem heitir <em>DBSCAN</em>. Hér er áhgugaverð <a class="reference external" href="https://scikit-learn.org/stable/auto_examples/cluster/plot_cluster_comparison.html">vefsíða með
flokkunarmyndum</a>
sem búnar eru til með ýmsum flokkurum úr Scikit-learn.</p>
</div>
</div>
</div>
<div class="section" id="fylkjamargfoldun-og-tolvugrafik">
<h2><span class="section-number">5.2. </span>Fylkjamargföldun og tölvugrafík<a class="headerlink" href="#fylkjamargfoldun-og-tolvugrafik" title="Varanlegur hlekkur á titilinn">¶</a></h2>
<p>Hægt er að líta á flatarmyndir, t.d. hringi, þríhyrninga, eða myndir af húsum
sem mengi af punktum, og síðan er hægt að skoða hvað línulegar varpanir
á <span class="math notranslate nohighlight">\(\Bbb{R}^2\)</span> (þ.e. frá <span class="math notranslate nohighlight">\(\Bbb{R}^2\)</span> til <span class="math notranslate nohighlight">\(\Bbb{R}^2\)</span> gera við
myndirnar, sem sé með því að skoða myndmengið sem kemur út þegar öllum punktum
flatarmyndarinnar er varpað. Það eru fjórar grunngerðir af tvívíðum línulegum
vörpunum: <strong>snúningur</strong> (<em>rotation</em>), <strong>skölun</strong> (<em>scaling</em>), <strong>skekking</strong> (<em>shear
deformation</em>) og <strong>speglun</strong> (<em>reflection</em>). Myndin hér að neðan sýnir dæmi um
allar þessar gerðir af vörpunum.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/tvividarvarpanir.png"><img alt="_images/tvividarvarpanir.png" src="_images/tvividarvarpanir.png" style="width: 100%;" /></a>
</div>
<p>Eins og við sáum í greinum <a class="reference internal" href="kafli04.html#linulegar-varpanir-og-fxv"><span class="std std-numref">4.9.2</span></a> og
<a class="reference internal" href="kafli04.html#linulegar-varpanir-og-fxf"><span class="std std-numref">4.9.3</span></a> er svo hægt að setja allar
þessar varpanir fram með fylkjum og margföldun með þeim.</p>
<p><strong>Snúningsfylki</strong> sem snýr mynd rangsælis um hornið <span class="math notranslate nohighlight">\(\theta\)</span> með snúningspunkt
<span class="math notranslate nohighlight">\((0,0)\)</span> er gefið með</p>
<div class="math notranslate nohighlight">
\[\begin{split}R_{\theta} = \begin{pmatrix}
\cos \theta &amp; -\sin \theta \\
\sin \theta &amp; \cos \theta
\end{pmatrix}\end{split}\]</div>
<p><strong>Skölunarfylki</strong> sem skalar um <span class="math notranslate nohighlight">\(a\)</span> í <span class="math notranslate nohighlight">\(x\)</span>-stefnu og <span class="math notranslate nohighlight">\(b\)</span> í
<span class="math notranslate nohighlight">\(y\)</span>-stefnu er</p>
<div class="math notranslate nohighlight">
\[\begin{split}S_{a,b} = \begin{pmatrix}a &amp; 0 \\ 0 &amp; b \end{pmatrix}\end{split}\]</div>
<p><strong>Skekkingarfylki</strong> eru</p>
<div class="math notranslate nohighlight">
\[\begin{split}K_{x,\theta} = \begin{pmatrix} 1 &amp; \sin \theta \\ 0 &amp; 1 \end{pmatrix}
\;\text{ og }\;
K_{y,\theta} = \begin{pmatrix} 1 &amp; 0 \\ \sin \theta &amp; 1 \end{pmatrix}\end{split}\]</div>
<p>Það fyrra hallar lóðréttum línum um horn <span class="math notranslate nohighlight">\(\theta\)</span> til hægri en varðveitir
láréttar línur, og það síðara hallar láréttum línum upp en varðveitir þær
lóðréttu.</p>
<p><strong>Speglunarfylki</strong> sem spegla um <span class="math notranslate nohighlight">\(x\)</span>-ás og <span class="math notranslate nohighlight">\(y\)</span>-ás eru</p>
<div class="math notranslate nohighlight">
\[\begin{split}M_x = \begin{pmatrix} 1 &amp; 0 \\ 0 &amp; -1 \end{pmatrix} \;\text{ og }\;
M_y = \begin{pmatrix} -1 &amp; 0 \\ 0 &amp; 1 \end{pmatrix}\end{split}\]</div>
<p>Hægt er að sýna fram á að sérhverja tvívíða línulega vörpun er hægt að rita sem
samsetningu af vörpunum af þessum fjórum gerðum, til dæmis væri hægt að stækka
fyrst, snúa svo og spegla í lokin, eða spegla um skálínu með því að snúa, spegla
og snúa til baka.</p>
<p>Allar þessar aðgerðir eru grunnaðgerðir í tölvugrafík. Þeim til viðbótar þarf í
tölvugrafík að vinna með hliðranir eða færslur (<em>displacements</em>), sem er líka
hægt að útfæra með fylkjamargföldun. Þá er bætt við gervihniti og unnið með
svonefnd <em>jafnþætt</em> eða <em>hómógen</em> hnit (<em>homogeneous</em>), þrívíða vigra og <span class="math notranslate nohighlight">\(3
\times 3\)</span> fylki.</p>
<p>Nútíma tölvugrafík er svo auðvitað oftast þrívíð og þar þarf að takast á við
þrívíða snúninga, speglanir og skalanir, og auk þess bæði hliðranir og
fjarvídd (<em>perspective</em>). Allt þetta er hægt að útfæra með fjórvíðum
vigrum og <span class="math notranslate nohighlight">\(4 \times 4\)</span> fylkjum, þar sem eitt hnitið er gervihnit.</p>
</div>
<div class="section" id="fylki-og-net">
<h2><span class="section-number">5.3. </span>Fylki og net<a class="headerlink" href="#fylki-og-net" title="Varanlegur hlekkur á titilinn">¶</a></h2>
<div class="section" id="net-hnutar-og-leggir">
<h3><span class="section-number">5.3.1. </span>Net, hnútar og leggir<a class="headerlink" href="#net-hnutar-og-leggir" title="Varanlegur hlekkur á titilinn">¶</a></h3>
<p><strong>Net</strong> (<em>graph</em> eða <em>network</em>) er safn af <strong>hnútum</strong> (eða <em>punktum</em>) (<em>vertices</em>, nodes*) og <strong>leggjum</strong> (<em>edges</em>) milli hnútanna. Net eru meðal annars umfjöllunarefni í Stærðfræðimynstrum. Þau geta verið <strong>stefnd</strong> (<em>directed</em>) eða <strong>óstefnd</strong>, og þegar þau eru stefnd eru leggirnir stundum kallaðir örvar. Net geta líka haft leggi sem tengja punkta við sjálfa sig, kallaðir <strong>snörur</strong> (<em>loops</em>). <a class="reference internal" href="#daemi-um-net"><span class="std std-numref">Mynd 5.6:</span></a> sýnir dæmi um net. Netið í miðjunni er það sama og netið til hægri.</p>
<div class="figure align-center" id="daemi-um-net">
<a class="reference internal image-reference" href="_images/dæmi-um-net.png"><img alt="_images/dæmi-um-net.png" src="_images/dæmi-um-net.png" style="width: 13cm;" /></a>
<p class="caption"><span class="caption-number">Mynd 5.6: </span><span class="caption-text">Óstefnt net (t.v.) og stefnt net (í miðju og t.h.)</span><a class="headerlink" href="#daemi-um-net" title="Varanlegur hlekkur á þessa mynd">¶</a></p>
</div>
</div>
<div class="section" id="grannafylki">
<h3><span class="section-number">5.3.2. </span>Grannafylki<a class="headerlink" href="#grannafylki" title="Varanlegur hlekkur á titilinn">¶</a></h3>
<p><strong>Grannafylki</strong> (<em>adjacency matrix</em>) stefnds nets er fylki <span class="math notranslate nohighlight">\(A\)</span> með</p>
<div class="math notranslate nohighlight">
\[\begin{split}a_{ij} = \left\{\begin{array}{ll}
1 &amp;\text{ef það er ör frá hnút } i \text{ yfir í hnút } j \\
0 &amp;\text{annars}
\end{array}
\right.\end{split}\]</div>
<p><strong>Grannafylki</strong> óstefnds nets er samhverft fylki <span class="math notranslate nohighlight">\(A\)</span> með</p>
<div class="math notranslate nohighlight">
\[\begin{split}a_{ij} = a_{ji} = \left\{\begin{array}{ll}
1 &amp;\text{ef leggur tengir hnút } i \text{ og hnút } j \\
0 &amp;\text{annars}
\end{array}
\right.\end{split}\]</div>
<div class="admonition important">
<p class="admonition-title">Sýnidæmi</p>
<p>Grannafylki netanna á <a class="reference internal" href="#daemi-um-net"><span class="std std-numref">Mynd 5.6:</span></a> eru</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{pmatrix}
0 &amp; 1 &amp; 1 \\
1 &amp; 0 &amp; 1 \\
1 &amp; 1 &amp; 0
\end{pmatrix}
\;\text{ (netið t.v.) og }\;
\begin{pmatrix}
0 &amp; 1 &amp; 1 \\
0 &amp; 0 &amp; 1 \\
0 &amp; 1 &amp; 0
\end{pmatrix}
\;\text{ (hin tvö)}\;\end{split}\]</div>
</div>
</div>
<div class="section" id="vegir-i-netum">
<span id="id3"></span><h3><span class="section-number">5.3.3. </span>Vegir í netum<a class="headerlink" href="#vegir-i-netum" title="Varanlegur hlekkur á titilinn">¶</a></h3>
<p><strong>Vegur</strong> (<em>path</em>) með lengd <span class="math notranslate nohighlight">\(L\)</span> í neti er runa af <span class="math notranslate nohighlight">\(L + 1\)</span> hnút þannig
að leggur tengi hnút 1 við hnút 2, hnút 2 við hnút 3, o.s.frv. Sagt er að
vegurinn tengi fyrsta hnútinn við þann síðasta. Veg með lengd 3 frá <span class="math notranslate nohighlight">\(v_1\)</span>
til <span class="math notranslate nohighlight">\(v_4\)</span> má rita</p>
<div class="math notranslate nohighlight">
\[v_1 \to v_2 \to v_3 \to v_4 \;\text{ eða }\; (v_1, v_2, v_3, v_4).\]</div>
<p>Skemmtileg regla tengir fjölda vega milli hnúta og veldi grannafylka:</p>
<blockquote>
<div><p><strong>REGLA.</strong> &thinsp; Grannafylki nets sé <span class="math notranslate nohighlight">\(A\)</span>. Þá er <span class="math notranslate nohighlight">\((i,j)\)</span>-stak
<span class="math notranslate nohighlight">\(A^n\)</span> jafnt og fjöldi mismunandi vega með lengd <span class="math notranslate nohighlight">\({} = n\)</span> frá
hnút <span class="math notranslate nohighlight">\(i\)</span> til hnúts <span class="math notranslate nohighlight">\(j\)</span> og <span class="math notranslate nohighlight">\((i,j)\)</span>-stak <span class="math notranslate nohighlight">\(A + A^2 +
\ldots + A^n\)</span> gefur fjölda mismunandi vega með lengd <span class="math notranslate nohighlight">\({} \leq n\)</span> (hér
er <span class="math notranslate nohighlight">\(A^n\)</span> fylkjaveldi, sbr. grein <a class="reference internal" href="kafli04.html#margfoldun-fylkja"><span class="std std-numref">4.8.1</span></a>).</p>
</div></blockquote>
<p>Þessi skilgreining og reglan sömuleiðis eiga bæði við um stefnd og óstefnd net.</p>
<div class="admonition important">
<p class="admonition-title">Sýnidæmi</p>
<p>Skoðum stefnda netið á eftirfarandi mynd:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/stefnt-net.png"><img alt="_images/stefnt-net.png" src="_images/stefnt-net.png" style="width: 6cm;" /></a>
</div>
<p>Grannafylkið og annað veldi þess eru gefin með</p>
<div class="math notranslate nohighlight">
\[\begin{split}A =
\begin{pmatrix}0&amp;1&amp;0&amp;1&amp;0\\1&amp;0&amp;0&amp;0&amp;0\\0&amp;1&amp;1&amp;0&amp;0\\0&amp;0&amp;1&amp;0&amp;1\\1&amp;0&amp;1&amp;0&amp;0\end{pmatrix}
\;\text{ og }\; A^2 = B =
\begin{pmatrix}1&amp;0&amp;1&amp;0&amp;1\\0&amp;1&amp;0&amp;1&amp;0\\1&amp;1&amp;1&amp;0&amp;0\\1&amp;1&amp;2&amp;0&amp;0\\0&amp;2&amp;1&amp;1&amp;0\end{pmatrix}\end{split}\]</div>
<p>Við sjáum að <span class="math notranslate nohighlight">\(b_{11} = 1\)</span> og að það er nákvæmlega einn vegur sem tengir
hnút 1 við sjálfan sig, nefnilega vegurinn <span class="math notranslate nohighlight">\(1 \to 2 \to 1\)</span>.  Til að
taka annað dæmi þá eru tveir vegir frá hnút 4 til hnúts 3, nefnilega
<span class="math notranslate nohighlight">\(4 \to 5 \to 3\)</span> og <span class="math notranslate nohighlight">\(4 \to 3 \to 3\)</span>, enda er <span class="math notranslate nohighlight">\((4,3)\)</span>-stak
<span class="math notranslate nohighlight">\(A^2\)</span> <span class="math notranslate nohighlight">\({}= b_{43} = 2\)</span>.</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Æfing</p>
<p>Stefnt net hefur leggi:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{ll}
1 \to 2 &amp;\qquad 2 \to 3 \\
1 \to 3 &amp;\qquad 2 \to 4 \\
1 \to 4 &amp;\qquad 3 \to 4
\end{array}\end{split}\]</div>
<ol class="loweralpha simple">
<li><p>Teiknið netið</p></li>
<li><p>Finnið grannafylkið <span class="math notranslate nohighlight">\(A\)</span></p></li>
<li><p>Reiknið <span class="math notranslate nohighlight">\(A^2\)</span> og <span class="math notranslate nohighlight">\(A^3\)</span></p></li>
<li><p>Reiknið <span class="math notranslate nohighlight">\(B = A + A^2 + A^3\)</span>. Þið ættuð að fá út að <span class="math notranslate nohighlight">\(b_{14} = 4\)</span>.
Finnið vegina fjóra frá hnút 1 til hnúts 4.</p></li>
</ol>
</div>
</div>
<div class="section" id="legufylki">
<h3><span class="section-number">5.3.4. </span>Legufylki<a class="headerlink" href="#legufylki" title="Varanlegur hlekkur á titilinn">¶</a></h3>
<p>Ef bæði hnútar og leggir nets eru tölusettir þá er hægt að skilgreina
<strong>legufylki</strong> (<em>incidence matrix</em>) þess. Fyrir óstefnt net með <span class="math notranslate nohighlight">\(n\)</span> hnútum og
<span class="math notranslate nohighlight">\(m\)</span> leggum er það <span class="math notranslate nohighlight">\(n \times m\)</span> fylki <span class="math notranslate nohighlight">\(A\)</span> með</p>
<div class="math notranslate nohighlight">
\[\begin{split}a_{ij} = \left\{\begin{array}{ll}
1 &amp;\text{ef hnútur } i \text{ er endi á legg } j \\
0 &amp;\text{annars}
\end{array}
\right.\end{split}\]</div>
<p>Það eru sem sé tveir ásar (stak sem er <span class="math notranslate nohighlight">\(= 1\)</span>) í dálki hvers leggs, nema hann sé snara, þá er bara
einn ás. Ef netið er stefnt þá er sett formerki á stök legufylkisins til að sýna
stefnu örvanna, oftast mínus í línu hnútsins þar sem örin byrjar:</p>
<div class="math notranslate nohighlight">
\[\begin{split}a_{ij} = \left\{\begin{array}{ll}
-1 &amp;\text{ef ör } j \text{ byrjar í hnút } i \\
1  &amp;\text{ef ör } j \text{ endar í hnút } i \\
0  &amp;\text{annars}
\end{array}
\right.\end{split}\]</div>
<p>Stundum er þetta samt haft öfugt. Fyrir snörur látum við formerkið vera <span class="math notranslate nohighlight">\({}+{}\)</span>.</p>
<div class="admonition important">
<p class="admonition-title">Sýnidæmi</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/legufylki.png"><img alt="_images/legufylki.png" src="_images/legufylki.png" style="width: 6cm;" /></a>
</div>
<p>Netið á myndinni hefur legufylki:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{pmatrix}-1&amp;-1&amp;0&amp;1&amp;0\\1&amp;0&amp;-1&amp;0&amp;0\\0&amp;0&amp;1&amp;-1&amp;-1\\0&amp;1&amp;0&amp;0&amp;1\end{pmatrix}\end{split}\]</div>
</div>
<div class="admonition hint">
<p class="admonition-title">Æfing</p>
<p>Óstefnt net hefur leggi <span class="math notranslate nohighlight">\(e_1: v_1\)</span>—<span class="math notranslate nohighlight">\(v_2\)</span>, <span class="math notranslate nohighlight">\(e_2:
v_2\)</span>—<span class="math notranslate nohighlight">\(v_2\)</span> og <span class="math notranslate nohighlight">\(e_3: v_2\)</span>—<span class="math notranslate nohighlight">\(v_3\)</span>.</p>
<ol class="loweralpha simple">
<li><p>Teiknið netið.</p></li>
<li><p>Ákvarðið grannafylki þess.</p></li>
<li><p>Ákvarðið legufylki þess.</p></li>
<li><p>Ákvarðið legufylkið fyrir tilsvarandi stefnt net með örvar <span class="math notranslate nohighlight">\(v_1 \to
v_2\)</span>, <span class="math notranslate nohighlight">\(v_2 \to v_2\)</span> og <span class="math notranslate nohighlight">\(v_2 \to v_3\)</span></p></li>
</ol>
</div>
</div>
<div class="section" id="flaeinet">
<h3><span class="section-number">5.3.5. </span>Flæðinet<a class="headerlink" href="#flaeinet" title="Varanlegur hlekkur á titilinn">¶</a></h3>
<p>Net sem lýsir kerfi þar sem eitthvað flæðir eftir hverjum legg, rafmagn, vatn,
umferð, vörur o.s.frv. er kallað <strong>flæðinet</strong> (<em>network</em>). Hnútpunktarnir eru þá
t.d. tengibox/tengivirki, tengipunktar, gatnamót eða dreifistöðvar. Í
slíkum netum eru tölur tengdar hverjum legg, stundum fleiri en ein. Fyrir legg
<span class="math notranslate nohighlight">\(e_j\)</span> gæti t.d. gilt:</p>
<div class="math notranslate nohighlight">
\[\begin{split}&amp;\text{flæði } = x_j \\
&amp;\text{hámarksflæði eða burðargeta } = b_j \\
&amp;\text{kostnaður á flutta einingu } = c_j\end{split}\]</div>
<p>Aðrir möguleikar á upplýsingum um leggi gætu t.d. verið lengdir þeirra eða
viðnám í þeim. Þessar upplýsingar mætti setja fram með fylki sem hefur ekki-núll
í sömu sætum og í grannafylki netsins (því þar er jú ás í sæti
<span class="math notranslate nohighlight">\((i,j)\)</span> ef leggur tengir hnúta <span class="math notranslate nohighlight">\(i\)</span> og <span class="math notranslate nohighlight">\(j\)</span>). Flæðinet
eru oft stefnd, en þá táknar stefna örvanna/leggjanna ekki stefnu
flæðisins, heldur einungis í hvaða stefnu flæðið telst jákvætt. Ef flæði er á
móti ör verður <span class="math notranslate nohighlight">\(x_j &lt; 0\)</span>.</p>
</div>
<div class="section" id="lindir-og-osar">
<h3><span class="section-number">5.3.6. </span>Lindir og ósar<a class="headerlink" href="#lindir-og-osar" title="Varanlegur hlekkur á titilinn">¶</a></h3>
<p>Legufylki eru oft gagnleg fyrir verkefni sem tengjast flæðinetum. Það
er ekki erfitt að sjá að ef <span class="math notranslate nohighlight">\(x\)</span> er flæðivigur með <span class="math notranslate nohighlight">\(x_j\)</span> =
flæði eftir ör <span class="math notranslate nohighlight">\(j\)</span> í stefndu neti með legufylki <span class="math notranslate nohighlight">\(A\)</span> og <span class="math notranslate nohighlight">\(y =
Ax\)</span> þá gefur <span class="math notranslate nohighlight">\(y_i\)</span> nettóflæði inn í hnút <span class="math notranslate nohighlight">\(i\)</span> fyrir öll <span class="math notranslate nohighlight">\(i\)</span>.
Ef <span class="math notranslate nohighlight">\(y_i\)</span> &gt; 0 þá er yfirflæði í hnútnum sem við hugsum okkur að renni út
úr netinu, og slíkur hnútur er kallaður <strong>ós</strong> (<em>sink</em>). Ef hinsvegar <span class="math notranslate nohighlight">\(y_i &lt;
0\)</span> þá þarf að bæta í flæðið í hnút <span class="math notranslate nohighlight">\(i\)</span> til að flæðið í netinu sé
allsstaðar varðveitt; slíkur hnútur kallast <strong>lind</strong> (<em>source</em>). Ef
<span class="math notranslate nohighlight">\(s\)</span> er vigur með</p>
<div class="math notranslate nohighlight">
\[\begin{split}&amp;s_i = \text{ nettóflæði inn í hnút } i \text{, og þar með:} \\
&amp;s_i \left\{\begin{array}{l}
{} &lt; 0 \text{ fyrir ósa}\\
{} &gt; 0 \text{ fyrir lindir}\\
{} = 0 \text{ fyrir aðra hnúta}
\end{array}\right.\end{split}\]</div>
<p>þá þýðir varðveisla flæðis að:</p>
<div class="math notranslate nohighlight">
\[Ax + s = 0.\]</div>
<p>Ef netið er tré (hringalaust) þá má leysa þessa jöfnu til að finna flæði í öllum
leggjum, en annars þarf meiri upplýsingar t.d. um þrýsing/spennu.</p>
<p>Eftirfarandi mynd sýnir flæðinet. Myndin segir ekkert um formerki flæðigilda svo
það er ekki hægt að sjá hvaða hnútpunktar eru lindir og hverjir eru ósar. Öll
<span class="math notranslate nohighlight">\(s_i\)</span>-in eru látin stefna inn í netið. Þar sem <span class="math notranslate nohighlight">\(s_i\)</span> er jákvætt
passar sú stefna, þar eru lindir sem skila flæði inn í netið, en þar sem
<span class="math notranslate nohighlight">\(s_i\)</span> er neikvætt er raunverulega að flæða út úr netinu.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/flæðinet.png"><img alt="_images/flæðinet.png" src="_images/flæðinet.png" style="width: 9cm;" /></a>
</div>
<div class="admonition hint">
<p class="admonition-title">Æfing</p>
<p>Gerið ráð fyrir að flæðivigur á myndinni hér á undan sé <span class="math notranslate nohighlight">\(x = (1, 3, 2, 4, -1)\)</span>.
Ákvarðið legufylkið <span class="math notranslate nohighlight">\(A\)</span> og í framhaldi nettóinnflæðið <span class="math notranslate nohighlight">\(s\)</span>.
Flokkið svo hnútana í lindir, ósa og aðra hnúta.</p>
</div>
</div>
</div>
<div class="section" id="linuleg-hreyfikerfi">
<h2><span class="section-number">5.4. </span>Línuleg hreyfikerfi<a class="headerlink" href="#linuleg-hreyfikerfi" title="Varanlegur hlekkur á titilinn">¶</a></h2>
<p>Í þessari grein kynnumst við notkun fylkjamargföldunar til að lýsa
kerfum sem breytast með tíma. Tekin verða dæmi um stofnstærð/mannfjölda
þar sem svonefnd Leslie fylki koma við sögu, og um hreyfingu massa
sem kraftar verka á.</p>
<div class="section" id="skilgreining-linulegra-hreyfikerfa">
<h3><span class="section-number">5.4.1. </span>Skilgreining línulegra hreyfikerfa<a class="headerlink" href="#skilgreining-linulegra-hreyfikerfa" title="Varanlegur hlekkur á titilinn">¶</a></h3>
<p>Lát <span class="math notranslate nohighlight">\(x_t\)</span> vera <span class="math notranslate nohighlight">\(n\)</span>-vigur sem lýsir einhverju <strong>ástandi</strong> (<em>state</em>)
kerfis á tíma <span class="math notranslate nohighlight">\(t\)</span>, <span class="math notranslate nohighlight">\(t = 0, 1, 2, \ldots\)</span> (stundum er <em>state</em> líka
þýtt með <strong>staða</strong>). Við skoðum sem sé kerfið á gefnum tímapunktum: tíminn líður
í strjálum (<em>discrete</em>) skrefum sem gætu verið sekúndur eða ár. <strong>Línulegt
hreyfikerfi</strong> (<em>linear dynamical system</em>) er líkan af kerfinu þar sem
<span class="math notranslate nohighlight">\(x_{t+1}\)</span> er línulegt fall af <span class="math notranslate nohighlight">\(x_t\)</span>:</p>
<div class="math notranslate nohighlight">
\[x_{t+1} = A_t x_t\quad (t = 0, 1, 2, \ldots)\]</div>
<p>Fylkin <span class="math notranslate nohighlight">\(A_t\)</span> (sem eru <span class="math notranslate nohighlight">\(n \times n\)</span>) eru kölluð <strong>hreyfifylki</strong>
(<em>dynamics matrices</em>). Ef þessi fylki og <span class="math notranslate nohighlight">\(x_0\)</span> eru þekkt þá er hægt
að nota líkanið til að reikna öll framtíðargildi ástandsvigursins <span class="math notranslate nohighlight">\(x_t\)</span>.
Hér er fylkinu leyft að vera háð <span class="math notranslate nohighlight">\(t\)</span> en oft er <span class="math notranslate nohighlight">\(A\)</span>-fylkið fast og
óháð <span class="math notranslate nohighlight">\(t\)</span>.</p>
<p><strong>Hliðrað línulegt hreyfikerfi</strong> (<em>non-homogeneous…</em>) er útvíkkun
hugtaksins þar sem ytri aðstæður hafa áhrif á þróun kerfisins. Því er lýst með
líkani:</p>
<div class="math notranslate nohighlight">
\[x_{t+1} = A_t x_t + B_t u_t \quad (t = 0, 1, 2, \ldots)\]</div>
<p><span class="math notranslate nohighlight">\(B_t\)</span> er <strong>inntaksfylki</strong> (<em>input matrix</em>) og <span class="math notranslate nohighlight">\(u_t\)</span> eru <strong>ytri</strong>
(<em>exogenous</em>) breytur („<span class="math notranslate nohighlight">\(B\)</span> tekur ytri breyturnar <strong>inn</strong> í kerfið“).</p>
</div>
<div class="section" id="roun-mannfjolda-ea-stofnstaerar">
<h3><span class="section-number">5.4.2. </span>Þróun mannfjölda eða stofnstærðar<a class="headerlink" href="#roun-mannfjolda-ea-stofnstaerar" title="Varanlegur hlekkur á titilinn">¶</a></h3>
<p>Við byrjum á að tala um mannfjölda, en augljóslega má nota sömu stærðfræði til
að lýsa stofnstærð dýrategunda. Gerum ráð fyrir að <span class="math notranslate nohighlight">\(x_t\)</span> sé
<span class="math notranslate nohighlight">\(n\)</span>-vigur með <span class="math notranslate nohighlight">\(i\)</span>-ta stak jafnt og fjöldi fólks í tilteknu landi sem
eru á <span class="math notranslate nohighlight">\(i\)</span>-ta aldursári (sem sé <span class="math notranslate nohighlight">\(i-1\)</span> ára gamlir), <span class="math notranslate nohighlight">\(t\)</span> árum
eftir tiltekinn byrjunartíma. Við gætum látið <span class="math notranslate nohighlight">\(n = 120\)</span>. Oft er svona
vigur kallaður <em>aldursdreifing</em> í landinu og hér er mynd sem sýnir
aldursdreifingu fólks yngra en 100 ára í Bandaríkjunum árið 2010.</p>
<div class="figure align-center" id="id8">
<a class="reference internal image-reference" href="_images/aldursdreifing.png"><img alt="_images/aldursdreifing.png" src="_images/aldursdreifing.png" style="width: 9cm;" /></a>
<p class="caption"><span class="caption-number">Mynd 5.7: </span><span class="caption-text">Aldursdreifing Bandaríkjamanna árið 2010. <br>
Milljónir á <span class="math notranslate nohighlight">\(y\)</span>-ás og aldur á <span class="math notranslate nohighlight">\(x\)</span>-ás.</span><a class="headerlink" href="#id8" title="Varanlegur hlekkur á þessa mynd">¶</a></p>
</div>
<p>Látum fæðingartíðni og dánartíðni vera gefna með vigrum <span class="math notranslate nohighlight">\(b\)</span> og <span class="math notranslate nohighlight">\(d\)</span>: <span class="math notranslate nohighlight">\(b_i\)</span> = árlegur meðalfjöldi lifandi fæddra barna foreldra sem eru að meðaltali á <span class="math notranslate nohighlight">\(i\)</span>-ta aldursári og <span class="math notranslate nohighlight">\(d_i\)</span> = hlutfall fólks á <span class="math notranslate nohighlight">\(i\)</span>-ta aldursári sem deyr. Til að vera nákvæmur mætti síðan skoða karla og konur aðskilið. Hér er mynd af <span class="math notranslate nohighlight">\(b\)</span> og <span class="math notranslate nohighlight">\(d\)</span> fyrir Bandaríkin í kring um árið 2010. Á þessum myndum er aftur miðað við fólk yngra en 100 ára.</p>
<div class="figure align-center" id="id9">
<a class="reference internal image-reference" href="_images/fæðingarogdánartíðni.png"><img alt="_images/fæðingarogdánartíðni.png" src="_images/fæðingarogdánartíðni.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-number">Mynd 5.8: </span><span class="caption-text">Fæðingartíðni (t.v.) og dánartíðni (t.h.) í prósentum eftir aldri í
Bandaríkjunum í lok árs 2010.</span><a class="headerlink" href="#id9" title="Varanlegur hlekkur á þessa mynd">¶</a></p>
</div>
<p>Smá skoðun leiðir nú í ljós að ef horft er framhjá aðfluttum og
brottfluttum má lýsa þróun mannfjöldans með línulega hreyfikerfinu:</p>
<div class="math notranslate nohighlight">
\[\begin{split}x_{t+1} = A x_t =
\begin{pmatrix}
b_1 &amp; b_2 &amp; b_3 &amp; \cdots &amp; b_{119} &amp; b_{120} \\
1-d_1 &amp; 0 &amp; 0   &amp; \cdots &amp; 0 &amp; 0 \\
0 &amp; 1-d_2 &amp; 0   &amp; \cdots &amp; 0 &amp; 0 \\
\vdots &amp; \vdots &amp; \vdots &amp;&amp; \vdots &amp; \vdots \\
0 &amp; 0 &amp; 0       &amp; \cdots &amp; 1-d_{119} &amp; 0
\end{pmatrix}
x_t\end{split}\]</div>
<p>Svona mannfjöldafylki (eða stofnstærðar-) er kallað <strong>Leslie-fylki</strong>. Það er sett
saman úr þremur þáttum:</p>
<ol class="arabic simple">
<li><p>Fæðingartíðni eftir ári í efstu línu</p></li>
<li><p>Dánartíðni eftir ári á skálínu neðan hornalínu</p></li>
<li><p>Ásar á sömu skálínu sem færa <span class="math notranslate nohighlight">\(i\)</span> ára á ári <span class="math notranslate nohighlight">\(t\)</span> í <span class="math notranslate nohighlight">\(i+1\)</span>
ára árið <span class="math notranslate nohighlight">\(t+1\)</span>.</p></li>
</ol>
<p>Ef taka skal tillit til aðfluttra og brottfluttra má nota hliðrað hreyfikerfi:</p>
<div class="math notranslate nohighlight">
\[x_{t+1} = A x_t + B u_t\]</div>
<p>þar sem <span class="math notranslate nohighlight">\(B\)</span> er einingafylkið og <span class="math notranslate nohighlight">\((i+1)\)</span>-ta stak <span class="math notranslate nohighlight">\(u_t\)</span> er fjöldi
<span class="math notranslate nohighlight">\(i\)</span> ára gamalla aðfluttra umfram brottflutta á ári <span class="math notranslate nohighlight">\(t\)</span>.</p>
<div class="admonition hint">
<p class="admonition-title">Æfing</p>
<p>Tegund lifir í hámark 3 ár. Hver 0 ára gefur 0.2 núll-ára afkvæmi árið eftir,
hver 1 árs 0.6 afkvæmi ári síðar og hver 2 ára 0.8. 20% núll-ára eru dauð ári
seinna, og dánartíðni eins-árs er 50%.</p>
<p>Í upphafi er stofnstærðin 3000 einstaklingar, 1200 núll-ára, 1000 eins árs og 800 tveggja ára.</p>
<ol class="loweralpha simple">
<li><p>Ákvarðið Leslie-fylkið</p></li>
<li><p>Ákvarðið stofnstærð eftir 1 ár</p></li>
<li><p>Ákvarðið stofnstærð eftir 2 ár</p></li>
</ol>
</div>
</div>
<div class="section" id="diffurjafna-fyrir-hreyfingu-hlutar">
<h3><span class="section-number">5.4.3. </span>Diffurjafna fyrir hreyfingu hlutar<a class="headerlink" href="#diffurjafna-fyrir-hreyfingu-hlutar" title="Varanlegur hlekkur á titilinn">¶</a></h3>
<p>Línuleg hreyfikerfi má nota til að líkja eftir hreyfingu margvíslegra
aflfræðilegra kerfa, t.d. flugféla, skipa, bíla eða bygginga í jarðskjálfta. Hér
lýsum við mjög einföldu kerfi, massa sem færist í beina línu fyrir áhrif
drifkrafts og verður jafnframt fyrir núningsmótstöðu. Við getum hugsað okkur
að um sé að ræða bát með utanborðsmótor.</p>
<div class="figure align-center" id="id10">
<a class="reference internal image-reference" href="_images/hraðbátur.png"><img alt="_images/hraðbátur.png" src="_images/hraðbátur.png" style="width: 12cm;" /></a>
<p class="caption"><span class="caption-number">Mynd 5.9: </span><span class="caption-text">Hraðbátur á Khövsgöl vatni í Mongólíu</span><a class="headerlink" href="#id10" title="Varanlegur hlekkur á þessa mynd">¶</a></p>
</div>
<p>Um slíka hreyfingu gildir 2. lögmál Newtons:</p>
<div class="math notranslate nohighlight">
\[\text{kraftur} = \text{massi} \cdot \text{hröðun}\]</div>
<p>Auk þess gildir að núningsmótstaðan verkar eins og kraftur sem er í
réttu hlutfalli við hraðann, sem sé</p>
<div class="math notranslate nohighlight">
\[\text{núningskraftur} = n \cdot \text{hraði}\]</div>
<p>þar sem <span class="math notranslate nohighlight">\(n\)</span> er núningsstuðull. Ef:</p>
<div class="math notranslate nohighlight">
\[\begin{split}&amp;m = \text{massi} \\
&amp;t = \text{tími} \\
&amp;f(t) = \text{drifkraftur á tíma } t\\
&amp;v(t) = \text{hraði á tíma } t \text{ og} \\
&amp;a(t) = \text{hröðun á tíma } t\end{split}\]</div>
<p>og hugað er að formerkjum liða þá fæst:</p>
<div class="math notranslate nohighlight">
\[(*)\qquad\qquad m a(t) = -n v(t) + f(t) \qquad\qquad\quad{}\]</div>
<p>Ef við látum líka <span class="math notranslate nohighlight">\(p(t)\)</span> vera staðsetningu á tíma <span class="math notranslate nohighlight">\(t\)</span> þá segir
eðlisfræðin okkur að <span class="math notranslate nohighlight">\(v(t) = p'(t)\)</span> og <span class="math notranslate nohighlight">\(a(t) = p''(t)\)</span> og þar með
verður <span class="math notranslate nohighlight">\((*)\)</span> að diffurjöfnunni:</p>
<div class="math notranslate nohighlight">
\[m p''(t) = -n p'(t) + f(t)\]</div>
<p>Þessa annarsstigs diffurjöfnu er einfalt að umrita sem fyrsta stigs
diffurjöfnukerfi í tvívíða fallinu <span class="math notranslate nohighlight">\((p(t), v(t))\)</span>:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{pmatrix}p'(t)\\mv'(t)\end{pmatrix} =
\begin{pmatrix}v(t)\\-nv(t) + f(t)\end{pmatrix}\end{split}\]</div>
</div>
<div class="section" id="diffurjofnu-breytt-i-linulegt-hreyfikerfi">
<h3><span class="section-number">5.4.4. </span>Diffurjöfnu breytt í línulegt hreyfikerfi<a class="headerlink" href="#diffurjofnu-breytt-i-linulegt-hreyfikerfi" title="Varanlegur hlekkur á titilinn">¶</a></h3>
<p>Nálgun við diffurjöfnukerfið að framan fæst með því að umrita staðsetningu og
hraða á tíma <span class="math notranslate nohighlight">\(t^+ = t+1\)</span> útfrá sömu stærðum á tíma <span class="math notranslate nohighlight">\(t\)</span> með fyrsta stigs
Taylor-nálgun, sbr. grein <a class="reference internal" href="kafli04.html#taylor"><span class="std std-numref">4.3.2</span></a>. Við beitum
einvíðu Taylor-setningunni annarsvegar á <span class="math notranslate nohighlight">\(p\)</span> og hinsvegar á <span class="math notranslate nohighlight">\(v\)</span> og það gefur:</p>
<div class="math notranslate nohighlight">
\[\begin{split}p(t^+) &amp;\approx p(t)+p'(t)(t^+-t) \text{ þ.e. }p'(t) \approx p(t^+)-p(t)\\
v(t^+) &amp;\approx v(t)+v'(t)(t^+-t) \text{ þ.e. }v'(t) \approx v(t^+)-v(t)\end{split}\]</div>
<p>Þessi nálgun verður góð ef við veljum tímaeininguna nógu litla (t.d. 1 sekúndu).
Ef þessari nálgun er stungið inn í diffurjöfnukerfið og við notum ritháttinn
<span class="math notranslate nohighlight">\(p_t, v_t\)</span> og <span class="math notranslate nohighlight">\(f_t\)</span> í stað <span class="math notranslate nohighlight">\(p(t), v(t)\)</span> og <span class="math notranslate nohighlight">\(f(t)\)</span> fæst:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{pmatrix}p_{t+1}-p_t \\ m(v_{t+1} - v_t)\end{pmatrix} =
\begin{pmatrix}v_t\\-nv_t + f_t\end{pmatrix}\end{split}\]</div>
<p>það er að segja:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{pmatrix}p_{t+1} \\ v_{t+1}\end{pmatrix} &amp;=
\begin{pmatrix}p_t + v_t\\ (1 - n/m) v_t + (1/m)f_t\end{pmatrix}\\ &amp;=
\begin{pmatrix}1 &amp; 1\\ 0 &amp; 1-n/m\end{pmatrix}
\begin{pmatrix}p_t\\ v_t\end{pmatrix} +
\begin{pmatrix}0\\ 1/m\end{pmatrix} f_t\end{split}\]</div>
<p>Þetta kerfi er greinilega hliðrað línulegt hreyfikerfi:</p>
<div class="math notranslate nohighlight">
\[(**)\qquad\qquad x_{t+1} = Ax_t + Bf_t\qquad\qquad\;\;{}\]</div>
<p>með ástandsvigri <span class="math notranslate nohighlight">\(x_t = (p_t, v_t)\)</span>, ytri breytum
<span class="math notranslate nohighlight">\(f_t\)</span>, og hreyfifylki og inntaksfylki:</p>
<div class="math notranslate nohighlight">
\[\begin{split}A = \begin{pmatrix}1 &amp; 1\\ 0 &amp; 1-n/m\end{pmatrix}\;\text{ og }\;
B = \begin{pmatrix}0\\1/m\end{pmatrix}\end{split}\]</div>
<div class="admonition important">
<p class="admonition-title">Sýnidæmi</p>
<p>Látum hreyfikerfið líkja eftir ferð 500 kg báts með utanborðsmótor í 50
sekúndur. Mótorinn er settur í gang eftir 5 sekúndur með 3000 newtona krafti
áfram, 10 sekúndum seinna er skipt í bakkgír, með 2500 newtona krafti í 15
sekúndur og svo er drepið á mótornum. Núningsstuðull er <span class="math notranslate nohighlight">\(n = 100\)</span>.</p>
<p>Byrjað er með <span class="math notranslate nohighlight">\(x_0 = (0,0)\)</span> og svo er <span class="math notranslate nohighlight">\(x_{t+1}\)</span> reiknað 50 sinnum
með <span class="math notranslate nohighlight">\((**)\)</span>. Hér eru myndir með niðurstöðum reikninganna (kN eru kílónewton):</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/krafturhraði.png"><img alt="_images/krafturhraði.png" src="_images/krafturhraði.png" style="width: 100%;" /></a>
</div>
</div>
<div class="admonition hint">
<p class="admonition-title">Æfing</p>
<ol class="loweralpha simple">
<li><p>Notið tölurnar sem gefnar eru í sýnidæminu hér á undan og ákvarðið
hreyfifylkið <span class="math notranslate nohighlight">\(A\)</span> og inntaksfylkið <span class="math notranslate nohighlight">\(B\)</span>.</p></li>
<li><p>Báturinn er kyrr í 5 sekúndur en þá fer hann af stað.
Reiknið staðsetningu og hraða hans eftir 6 og 7 sekúndur með blaði og
blýanti.</p></li>
<li><p>Notið nú Python til að líkja eftir hreyfingu bátsins í 50
sekúndur og endurskapa þannig línuritin í sýnidæminu.</p></li>
<li><p>Notið Python til að finna hámarkshraða bátsins.</p></li>
</ol>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="kafli04.html" class="btn btn-neutral float-left" title="4. Línuleg algebra" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  




</body>
</html>