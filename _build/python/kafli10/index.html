<!DOCTYPE html>
<html class="writer-html5" lang="is" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>10 NumPy pakkinn &mdash; Fyrirlestrarnótur um Python 2021</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/python.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/edbook.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon_2.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/togglebutton.js"></script>
        <script src="../_static/translations.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>

<!-- hoverrole.py css code -->
<style type="text/css">
    a.tooltip {
        outline: none;
        border-bottom: thin dotted;
        background: #ffeedd
    }

    a.tooltip strong {
        line-height: 30px;
    }

    a.tooltip:hover {
        text-decoration: none;
    }

    a.tooltip span {
        z-index: 10;
        display: none;
        padding: 14px 20px;
        margin-top: -30px;
        margin-left: 12px;
        width: 310px;
        line-height: 16px;
    }

    a.tooltip:hover span {
        display: inline;
        position: absolute;
        color: #111;
        border: 1px solid #DCA;
        background: #fffAF0;
    }

    .callout {
        z-index: 20;
        position: absolute;
        top: 30px;
        border: 0;
        left: -12px;
    }

    /*CSS3*/
    a.tooltip span {
        border-radius: 4px;
        box-shadow: 5px 5px 8px #CCC;
    }
</style>
<!-- End hoverrole.py css code -->

<style type="text/css">
    .sagecell .CodeMirror-scroll {
        overflow-y: hidden;
        overflow-x: auto;
    }

    .sagecell .CodeMirror {
        height: auto;
    }

    /* - Begin equation reference style - */
    h6.eqno {
        display: inline-block;
        padding-left: 10px;
    }

    h6 .headerlink {
        display: inline-block !important;
    }

    h6 .headerlink:after {
        visibility: hidden !important;
    }

    h6 .headerlink:hover:after {
        visibility: visible !important;
    }

    .eqno:hover>.headerlink:after {
        visibility: visible !important;
    }

    table>caption>.headerlink {
        visibility: hidden !important;
    }

    table>caption>.headerlink {
        visibility: hidden !important;
    }

    /* - End - */
</style>
<style type="text/css">
    /* .ace_content .ace_layer .ace_line_group .ace_line * { */
    /*     font-size: 15px !important; */
    /* } */
    /* div[class^='highlight'] pre {font-size:15px} */
    div.code-block-caption {
        margin-bottom: 4px
    }
</style>

    <link rel="index" title="Atriðaskrá" href="../genindex/" />
    <link rel="search" title="Leit" href="../search/" />
    <link rel="next" title="11 Reiknað með fylkjum" href="../kafli11/" />
    <link rel="prev" title="9 Teikning með Matplotlib" href="../kafli09/" />



<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> -->
<script type="text/javascript" src="https://cdn.geogebra.org/apps/deployggb.js"></script>


 

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../" class="icon icon-home">
            Fyrirlestrarnótur um Python
          </a>
              <div class="version">
                2021
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../kafli01/">1  Inngangur: Um Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli02/">2  Dæmi um Python forrit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli03/">3  Umhverfi fyrir Python: Jupyter og Colab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli04/">4  Grunnatriði Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli05/">5  Söfn: Eitt nafn en mörg gildi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli06/">6  Helstu aðgerðir fyrir söfn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli07/">7  Uppflettitöflur</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli08/">8  Skrár</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli09/">9  Teikning með Matplotlib</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">10  NumPy pakkinn</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#inngangur">10.1  Inngangur</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#vigrar-og-fylki-i-staerfraei">10.1.1  Vigrar og fylki í stærðfræði</a></li>
<li class="toctree-l3"><a class="reference internal" href="#um-ori-fylki">10.1.2  Um orðið Fylki</a></li>
<li class="toctree-l3"><a class="reference internal" href="#import-skipanir-fyrir-numpy">10.1.3  Import-skipanir fyrir NumPy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#vigrar-i-numpy">10.2  Vigrar í NumPy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#vigur-gefi-gildi">10.2.1  Vigur gefið gildi</a></li>
<li class="toctree-l3"><a class="reference internal" href="#einstok-stok-og-hlutvigrar">10.2.2  Einstök stök og hlutvigrar</a></li>
<li class="toctree-l3"><a class="reference internal" href="#utprentun-vigra">10.2.3  Útprentun vigra</a></li>
<li class="toctree-l3"><a class="reference internal" href="#foll-af-vigrum">10.2.4  Föll af vigrum</a></li>
<li class="toctree-l3"><a class="reference internal" href="#aferir-i-sta-falla">10.2.5  Aðferðir í stað falla</a></li>
<li class="toctree-l3"><a class="reference internal" href="#foll-til-a-bua-til-vigra">10.2.6  Föll til að búa til vigra</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#utreikningur-me-vigrum">10.3  Útreikningur með vigrum</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#reikna-me-vigrum-i-staerfraei">10.3.1  Reiknað með vigrum í stærðfræði</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plus-minus-margfoldun-og-deiling-i-numpy">10.3.2  Plús, mínus, margföldun og deiling í NumPy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#venjulegum-staerfraeifollum-beitt-a-vigra">10.3.3  Venjulegum stærðfræðiföllum beitt á vigra</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rokvigrar-og-rokvisun">10.4  Rökvigrar og rökvísun</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#rokvigrar-logical-vectors">10.4.1  Rökvigrar (<em>logical vectors</em>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rokvisun-logical-indexing">10.4.2  Rökvísun (<em>logical indexing</em>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stakvisir-rokvirkjar">10.4.3  Stakvísir rökvirkjar</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#fylki-i-numpy">10.5  Fylki í NumPy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#fylki-er-listi-af-listum">10.5.1  Fylki er listi af listum</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stok-fylkis-linur-og-dalkar">10.5.2  Stök fylkis, línur og dálkar</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nullfylki">10.5.3  Núllfylki</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bylting">10.5.4  Bylting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#afpokkun">10.5.5  Afpökkun</a></li>
<li class="toctree-l3"><a class="reference internal" href="#foll-til-a-bua-til-fylki">10.5.6  Föll til að búa til fylki</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#innlestur-og-utskrift">10.6  Innlestur og útskrift</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#talnalestur">10.6.1  Talnalestur</a></li>
<li class="toctree-l3"><a class="reference internal" href="#utskrift-talna">10.6.2  Útskrift talna</a></li>
<li class="toctree-l3"><a class="reference internal" href="#innlestur-skraa-me-textadalkum">10.6.3  Innlestur skráa með textadálkum</a></li>
<li class="toctree-l3"><a class="reference internal" href="#csv-skar-ur-excel">10.6.4  CSV-skár úr Excel</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#listi-yfir-skrar-a-cs-hi-is-python">10.7  Listi yfir skrár á cs.hi.is/python</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../kafli11/">11  Reiknað með fylkjum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli12/">12  Dæmi um hagnýtingu fylkjareikninga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli13/">13  Slembitölur</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli14/">14  Millikafli: Um reiknifræði og gagnavísindi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli15/">15  Pandas</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../verkefnafyrirsogn/">V E R K E F N I</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">Fyrirlestrarnótur um Python</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">10  </span>NumPy pakkinn</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/kafli10.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="numpy-pakkinn">
<span id="numpy"></span><h1><span class="section-number">10  </span>NumPy pakkinn<a class="headerlink" href="#numpy-pakkinn" title="Permalink to this heading"></a></h1>
<section id="inngangur">
<span id="numpy-inngangur"></span><h2><span class="section-number">10.1  </span>Inngangur<a class="headerlink" href="#inngangur" title="Permalink to this heading"></a></h2>
<p>NumPy pakkinn er ætlaður fyrir vinnu með <strong>vigra</strong> (<em>vectors</em>) og <strong>fylki</strong>
(<em>matrices</em>) í Python og auk þess ýmsa tölulega reikninga (<em>numerical
computations</em>) af einfaldara tagi. Pakkinn <strong>SciPy</strong> er síðan ætlaður fyrir
allskyns sérhæfðari vísindalega reikninga.</p>
<section id="vigrar-og-fylki-i-staerfraei">
<h3><span class="section-number">10.1.1  </span>Vigrar og fylki í stærðfræði<a class="headerlink" href="#vigrar-og-fylki-i-staerfraei" title="Permalink to this heading"></a></h3>
<p>Nákvæmar skilgreingar á stærðfræðilegum vigrum og fylkjum og skyldum hugtökum
eru umfjöllunarefni í námskeiðum um línuleg algebru. Hér látum við duga styttri útgáfur.</p>
<p><strong>Vigur</strong> (<em>vector</em>) er runa af endanlega mörgum tölum sem gefið er nafn og notuð sem ein heild. Einstakar tölur nefnast <strong>stök</strong> (<em>elements</em>), þau eru oftast tölusett 1, 2, 3… en stundum 0, 1, 2…, og i-ta stak vigurs <span class="math notranslate nohighlight">\(a\)</span> er táknað <span class="math notranslate nohighlight">\(a_i\)</span>. Vigur <span class="math notranslate nohighlight">\(a\)</span> með tölunum 1, 2 og 4 má rita</p>
<div class="math notranslate nohighlight">
\[\begin{split}a=(1,2,4)\quad\text{eða}\quad a=\begin{pmatrix}1\\2\\4\end{pmatrix}\end{split}\]</div>
<p><strong>Fylki</strong> (<em>matrix</em>) er tafla með tölum sem gefið er nafn og notuð sem heild. Tölur í fylki heita líka stök. Stakið í línu <span class="math notranslate nohighlight">\(i\)</span> og dálki <span class="math notranslate nohighlight">\(j\)</span> í fylki <span class="math notranslate nohighlight">\(A\)</span> er táknað <span class="math notranslate nohighlight">\(a_{ij}\)</span>. Í stærðfræðilegri umfjöllun er oftast byrjað að telja í 1 svo stakið efst til vinstri er <span class="math notranslate nohighlight">\(a_{11}\)</span>, en þegar verið er reikna í tölvum er oft byrjað að telja í 0. Fylki með <span class="math notranslate nohighlight">\(m\)</span> línum og <span class="math notranslate nohighlight">\(n\)</span> dálkum er kallað <span class="math notranslate nohighlight">\(m\)</span> sinnum <span class="math notranslate nohighlight">\(n\)</span> fylki, táknað <span class="math notranslate nohighlight">\(m \times n\)</span>. Hér er dæmi um <span class="math notranslate nohighlight">\(2 \times 3\)</span> fylki:</p>
<div class="math notranslate nohighlight">
\[\begin{split}A = \begin{pmatrix}1 &amp; 2 &amp; 3\\6 &amp; 7 &amp; 8\end{pmatrix}\end{split}\]</div>
</section>
<section id="um-ori-fylki">
<span id="id1"></span><h3><span class="section-number">10.1.2  </span>Um orðið Fylki<a class="headerlink" href="#um-ori-fylki" title="Permalink to this heading"></a></h3>
<p>Skv. <a class="reference external" href="https://tos.sky.is">Tölvuorðasafninu</a> hefur orðið fylki tvær merkingar á
íslensku:</p>
<ol class="arabic simple">
<li><p>[einkum í stærðfræði] <em>rétthyrnd tafla af tölum (eða öðrum gildum)</em> = e.
<em>matrix</em>.</p></li>
<li><p>[einkum í tölvufræði] <em>samsteypa (aggregate) hluta af sama tagi þar sem
hægt er að vísa í einstök stök með vísi eða vísum (index, indices)</em> = e.
<em>array</em>.</p></li>
</ol>
<p>Í seinni merkingunni er fylki notað sem samheiti yfir vigra, tvívíð fylki, og
margvíð fylki (þar sem vísarnir eru 3 eða fleiri). Stundum er talað um vigra sem
einvíð fylki.</p>
<div class="admonition danger">
<p class="admonition-title">Aðvörun</p>
<p>Þar sem NumPy er beggja megin veggjar, í stærðfræði og í tölvufræði, verður
orðið fylki notað í báðum merkingunum hér – lesandi þarf stundum af
ráða af samhenginu við hvað er átt.</p>
</div>
</section>
<section id="import-skipanir-fyrir-numpy">
<span id="fylkjareikn"></span><h3><span class="section-number">10.1.3  </span>Import-skipanir fyrir NumPy<a class="headerlink" href="#import-skipanir-fyrir-numpy" title="Permalink to this heading"></a></h3>
<p>Í NumPy er undirpakki sem heitir <code class="docutils literal notranslate"><span class="pre">numpy.linalg</span></code> sem er talsvert notaður. Hann geymir meðal annars föll til að reikna norm vigurs og til að leysa jöfnuhneppi. Alsiða er að skammstafa numpy með np og numpy.linalg með la, sem sé að flytja inn með:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">numpy.linalg</span> <span class="k">as</span> <span class="nn">la</span>
</pre></div>
</div>
<p>Síðan er sett <code class="docutils literal notranslate"><span class="pre">np.</span></code> eða <code class="docutils literal notranslate"><span class="pre">la.</span></code> á undan NumPy-skipunum og -föllum sem notuð eru.</p>
</section>
</section>
<section id="vigrar-i-numpy">
<h2><span class="section-number">10.2  </span>Vigrar í NumPy<a class="headerlink" href="#vigrar-i-numpy" title="Permalink to this heading"></a></h2>
<p>Vigur í NumPy er að mörgu leyti líkur venjulegum Python lista. Aðalmunurinn er
sá að í vigrum eru öll stök tölur, oftast kommutölur (<em>float</em>) en það er líka
hægt að geyma heiltölur eða strengi. En öll stök vigursins verða að vera af sama
gagnatagi, og með því sparast minnispláss og auk þess fæst mun hraðvirkari
vinnsla þegar unnið er með mörg stök.</p>
<section id="vigur-gefi-gildi">
<span id="id2"></span><h3><span class="section-number">10.2.1  </span>Vigur gefið gildi<a class="headerlink" href="#vigur-gefi-gildi" title="Permalink to this heading"></a></h3>
<p>NumPy er viðbót við Python, og öfugt við grunntögin sem öll gefa kost á að búa
til fasta af hverju tagi (sjá kafla <a class="reference internal" href="../kafli04/#breytur-og-tog"><span class="std std-numref">4.1</span></a> og
<a class="reference internal" href="../kafli05/#sofn-inngangur"><span class="std std-numref">5.1</span></a>) er ekki boðið upp á vigur-fasta, heldur þarf að nota
NumPy-föll til að búa til vigra.</p>
<p>Eitt þeirra er fallið <code class="docutils literal notranslate"><span class="pre">np.array</span></code> sem breytir venjulegum Python-lista af tölum
í vigur. Til að búa til vigurinn <span class="math notranslate nohighlight">\(x = (1,2,3,4,6)\)</span> má nota skipunina:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">np.array([1,2,3,4,6])</span></code></p>
</div></blockquote>
<p>Svo eru til skipanir til að búa til ýmsa sérstaka vigra, til dæmis fæst núllvigur með 3 stökum, <span class="math notranslate nohighlight">\(z = (0,0,0)\)</span>, með:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">np.zeros(3)</span></code></p>
</div></blockquote>
<p>Loks skal tekið fram að ef vigur er gefið gildi með öðrum vigri (t.d. <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">x</span></code>)
er ekki tekið afrit heldur er búin til ný tilvísun í vigurinn, sbr. kafla
<a class="reference internal" href="../kafli05/#gildisgjof-gefur-tilvisun"><span class="std std-numref">5.3.4</span></a> og <a class="reference internal" href="../kafli06/#agerir-sem-duga-a-oll-sofn"><span class="std std-numref">6.2</span></a>.
Til að taka afrit mætti nota:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">x.copy()</span></code></p>
</div></blockquote>
</section>
<section id="einstok-stok-og-hlutvigrar">
<h3><span class="section-number">10.2.2  </span>Einstök stök og hlutvigrar<a class="headerlink" href="#einstok-stok-og-hlutvigrar" title="Permalink to this heading"></a></h3>
<p>Vísað í einstök stök í vigrum með hornklofum, alveg eins og í listum, og fyrsta
stakið er líka númer 0. Ef x er <span class="math notranslate nohighlight">\((1,2,3,4,6)\)</span> þá væri <code class="docutils literal notranslate"><span class="pre">x[2]</span></code> = 3,
<code class="docutils literal notranslate"><span class="pre">x[2:]</span></code> væri NumPy vigurinn <span class="math notranslate nohighlight">\((3,4,6)\)</span> og <code class="docutils literal notranslate"><span class="pre">x[::2]</span></code> væri vigurinn
<span class="math notranslate nohighlight">\((1,3,6)\)</span>.</p>
<div class="aefing admonition">
<p class="admonition-title">Æfing: Fyrsta NumPy-æfingin</p>
<p>Prófið skipanirnar í næsta kafla á undan (<a class="reference internal" href="#vigur-gefi-gildi"><span class="std std-numref">10.2.1</span></a>) og
þessum kafla</p>
</div>
</section>
<section id="utprentun-vigra">
<h3><span class="section-number">10.2.3  </span>Útprentun vigra<a class="headerlink" href="#utprentun-vigra" title="Permalink to this heading"></a></h3>
<p>Til að prenta út vigur x er hægt að skrifa einfaldlega</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">print(x)</span></code> eða <code class="docutils literal notranslate"><span class="pre">print(&quot;x</span> <span class="pre">=&quot;,</span> <span class="pre">x)</span></code></p>
</div></blockquote>
<p>Það er hægt að stjórna fjölda aukastafa sem <code class="docutils literal notranslate"><span class="pre">print</span></code> birtir en við látum það
bíða aðeins (sjá kafla <a class="reference internal" href="../kafli13/#innskot"><span class="std std-numref">13.2</span></a>). Svo er hægt að prenta einstök stök í
for-lykkju, og þá er hægt að nota f-strengi, sbr. eftirfarandi dæmi</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">5.55</span><span class="p">,</span><span class="mf">7.77</span><span class="p">])</span>
<span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">ai</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
   <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;a[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">] = </span><span class="si">{</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>sem mundi prenta</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>a[0] = 5.55
a[1] = 7.77
</pre></div>
</div>
</section>
<section id="foll-af-vigrum">
<h3><span class="section-number">10.2.4  </span>Föll af vigrum<a class="headerlink" href="#foll-af-vigrum" title="Permalink to this heading"></a></h3>
<p>Föllin sem sagt var frá í köflum <a class="reference internal" href="../kafli06/#oll-sofn"><span class="std std-numref">6.2</span></a> og <a class="reference internal" href="../kafli06/#sofn-af-tolum"><span class="std std-numref">6.3</span></a>
og hægt er að nota á lista af tölum er líka hægt að nota á vigra. Það eru einkum
<code class="docutils literal notranslate"><span class="pre">len,</span> <span class="pre">min,</span> <span class="pre">max</span></code> og <code class="docutils literal notranslate"><span class="pre">sum</span></code> sem eru nytsamleg. Með NumPy má auk þessara falla
nota <code class="docutils literal notranslate"><span class="pre">np.argmin(x)</span></code> og <code class="docutils literal notranslate"><span class="pre">np.argmax(x)</span></code> sem skila sætisnúmeri minnsta eða
stærsta staks x, <code class="docutils literal notranslate"><span class="pre">np.mean(x)</span></code> sem reiknar meðaltal stakanna og <code class="docutils literal notranslate"><span class="pre">la.norm(x)</span></code>
sem skilar norminu af x, <span class="math notranslate nohighlight">\(\|x\|\)</span>, en <strong>norm</strong> af n-staka vigur x er
skilgreint með:</p>
<div class="math notranslate nohighlight">
\[\text{norm(x)} = \|x\| = \sqrt{x_0^2 + x_1^2 + \ldots + x_{n-1}^2}\]</div>
</section>
<section id="aferir-i-sta-falla">
<h3><span class="section-number">10.2.5  </span>Aðferðir í stað falla<a class="headerlink" href="#aferir-i-sta-falla" title="Permalink to this heading"></a></h3>
<p>Öll föllin sem nefnd eru hér næst á undan nema len og norm eru líka til sem aðferðir.
Ef x er vigur má sem sé skrifa <code class="docutils literal notranslate"><span class="pre">x.sum()</span></code> í stað <code class="docutils literal notranslate"><span class="pre">np.sum(x)</span></code> (og spara tvo stafi). Þetta er ekki hægt ef x er listi. Hér fylgir tafla yfir öll umrædd föll og aðferðir:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>fall</p></th>
<th class="head"><p>aðferð</p></th>
<th class="head"><p>skilagildi</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">len(x)</span></code></p></td>
<td><p>–</p></td>
<td><p>fjöldi staka í x</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sum(x)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x.sum()</span></code></p></td>
<td><p>summa stakanna í x</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min(x)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x.min()</span></code></p></td>
<td><p>minnsta stak í x</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max(x)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x.max()</span></code></p></td>
<td><p>stærsta stak í x</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">np.argmin(x)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x.argmin()</span></code></p></td>
<td><p>sæti minnsta staks í x</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">np.argmax(x)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x.argmax()</span></code></p></td>
<td><p>sæti stærsta staks í x</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">np.mean(x)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x.mean()</span></code></p></td>
<td><p>meðaltal stakanna í x</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">la.norm(x)</span></code></p></td>
<td><p>–</p></td>
<td><p>normið af x, <span class="math notranslate nohighlight">\(\|x\|\)</span></p></td>
</tr>
</tbody>
</table>
<p>Takið eftir að ekki þarf að setja <code class="docutils literal notranslate"><span class="pre">np.</span></code> fremst í fyrstu fjögur föllin, sem eru
innbyggð í Python-málið.</p>
<div class="aefing admonition">
<p class="admonition-title">Æfing: Nokkur NumPy föll</p>
<p>Búið til vigur <span class="math notranslate nohighlight">\((2,3,5,7,11)\)</span>, prentið hann út, og prófið svo öll
föllin sem hér voru talin upp</p>
</div>
</section>
<section id="foll-til-a-bua-til-vigra">
<h3><span class="section-number">10.2.6  </span>Föll til að búa til vigra<a class="headerlink" href="#foll-til-a-bua-til-vigra" title="Permalink to this heading"></a></h3>
<p>Nokkur þægileg og mikilvæg föll má nota til að búa til vigra. Við höfum þegar
séð fallið zeros en auk þess er til ones og tvö föll til að búa til vigra með
hlaupandi stökum:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>kall</p></th>
<th class="head"><p>skilar</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">np.zeros(n)</span></code></p></td>
<td><p>vigur með n núllum</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">np.ones(n)</span></code></p></td>
<td><p>vigur með n ásum, <span class="math notranslate nohighlight">\((1,1,1...)\)</span></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">np.linspace(a,b,n)</span></code></p></td>
<td><p>n-staka vigur jafnt dreifður á bilið <span class="math notranslate nohighlight">\([a,b]\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">np.arange(a,b)</span></code></p></td>
<td><p><span class="math notranslate nohighlight">\((a, a+1, a+2,...,b-1)\)</span></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">np.arange(a,b,d)</span></code></p></td>
<td><p><span class="math notranslate nohighlight">\((a, a+d, a+2d,...,b-d)\)</span></p></td>
</tr>
</tbody>
</table>
<p>Við tökum eftir að í arange er b ekki með í x, alveg eins og með innbyggða fallinu <code class="docutils literal notranslate"><span class="pre">range</span></code>.</p>
<div class="aefing admonition">
<p class="admonition-title">Æfing: Vigratilbúningur</p>
<ul class="simple">
<li><p>Búið til vigurinn <span class="math notranslate nohighlight">\((3, 4, 5, 6, 7)\)</span> bæði með linspace og arange</p></li>
<li><p>Búið til <span class="math notranslate nohighlight">\((2.0, 2.1, 2.2,\ldots, 3.9, 4.0)\)</span> með linspace og arange</p></li>
</ul>
</div>
</section>
</section>
<section id="utreikningur-me-vigrum">
<h2><span class="section-number">10.3  </span>Útreikningur með vigrum<a class="headerlink" href="#utreikningur-me-vigrum" title="Permalink to this heading"></a></h2>
<section id="reikna-me-vigrum-i-staerfraei">
<span id="reikna-me-vigrum"></span><h3><span class="section-number">10.3.1  </span>Reiknað með vigrum í stærðfræði<a class="headerlink" href="#reikna-me-vigrum-i-staerfraei" title="Permalink to this heading"></a></h3>
<p>Í stærðfræði, nánar tiltekið undirgrein hennar sem kallast línuleg algebra, er fjallað um ýmsa útreikninga með vigrum. Það er hægt að leggja saman vigra, draga þá hvern frá öðrum og margfalda þá með tölum. Það er líka hægt að reikna <strong>innfeldi</strong> (<em>scalar product</em>) tveggja vigra og fá út tölu, og svo má reikna norm vigurs með fyrrnefndu norm-falli</p>
<div class="synidaemi admonition">
<p class="admonition-title">Sýnidæmi: Vigurreikningar</p>
<p>Lát <span class="math notranslate nohighlight">\(x = (2,3,6)\)</span> og <span class="math notranslate nohighlight">\(y = (1,1,2)\)</span>. Þá gildir:</p>
<div class="math notranslate nohighlight">
\[\begin{split}x + y     &amp;= (3,4,8)\\
x - y     &amp;= (1,2,4)\\
2x        &amp;= (4,6,12)\\
\|x\|     &amp;= \sqrt{2^2 + 3^2 + 6^2} = \sqrt{49} = 7\\
x \cdot y &amp;= 2\cdot 1 + 3\cdot 1 + 6\cdot 2 = 2 + 3 + 12 = 17\end{split}\]</div>
</div>
<p>Aðgerðin í neðstu línunni nefnist innfeldi, og það er skilgreint með:</p>
<blockquote>
<div><div class="math notranslate nohighlight">
\[x \cdot y = x_0 y_0 + x_1 y_1 + \ldots + x_{n-1} y_{n-1}\]</div>
</div></blockquote>
<p>þar sem bæði <span class="math notranslate nohighlight">\(x\)</span> og <span class="math notranslate nohighlight">\(y\)</span> eru <span class="math notranslate nohighlight">\(n\)</span>-staka vigrar.</p>
</section>
<section id="plus-minus-margfoldun-og-deiling-i-numpy">
<span id="plus-minus-margfoldun"></span><h3><span class="section-number">10.3.2  </span>Plús, mínus, margföldun og deiling í NumPy<a class="headerlink" href="#plus-minus-margfoldun-og-deiling-i-numpy" title="Permalink to this heading"></a></h3>
<p>Rifjum upp þegar aðgerðunum plús og sinnum (<code class="docutils literal notranslate"><span class="pre">+</span></code> og <code class="docutils literal notranslate"><span class="pre">*</span></code>) er beitt á lista þá
skeyta þær saman listum eða fjölfalda þá. Hér skilur leiðir með listum og
vigrum: Þegar þessar aðgerðir eru notaðar á vigra þá leggjast þeir saman eða
margfaldast eins og í stærðfræði. Hér er tafla yfir helstu NumPy reikniaðgerðir,
þar sem x, y og z eru vigrar en a er tala:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>útreikningur</p></th>
<th class="head"><p>skilar</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">x*a</span></code></p></td>
<td><p>margfaldar öll stök í x með tölunni a</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">x/a</span></code></p></td>
<td><p>deilir með tölu a upp í öll stök x</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">a</span></code></p></td>
<td><p>leggur a við öll stök x</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">x</span> <span class="pre">-</span> <span class="pre">a</span></code></p></td>
<td><p>dregur a frá öllum stökum x</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">y</span></code></p></td>
<td><p>leggur saman tilsvarandi stök, <code class="docutils literal notranslate"><span class="pre">z[i]</span> <span class="pre">=</span> <span class="pre">x[i]+y[i]</span></code> fyrir öll <code class="docutils literal notranslate"><span class="pre">i</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">x</span> <span class="pre">-</span> <span class="pre">y</span></code></p></td>
<td><p>dregur frá, <code class="docutils literal notranslate"><span class="pre">z[i]</span> <span class="pre">=</span> <span class="pre">x[i]-y[i]</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">x*y</span></code></p></td>
<td><p>margfaldar tilsvarandi stök, <code class="docutils literal notranslate"><span class="pre">z[i]</span> <span class="pre">=</span> <span class="pre">x[i]*y[i]</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">x&#64;y</span></code></p></td>
<td><p>innfeldi x og y</p></td>
</tr>
</tbody>
</table>
<p>Takið eftir margföldunarvirkinn <code class="docutils literal notranslate"><span class="pre">*</span></code> reiknar ekki innfeldi heldur margfaldast
tilsvarandi stök saman. Slík notkun á margföldunarvirkja er ekki hefðbundin í
stærðfræði. Í Python er notaður sérstakur virki sem reiknar innfeldi, <code class="docutils literal notranslate"><span class="pre">&#64;</span></code>. Í
stærðfræði er líka óhefðbundið að leggja tölu við vigur eða draga frá.</p>
<div class="aefing admonition">
<p class="admonition-title">Æfing: Vigurreikningar</p>
<p>Búið til vigrana <span class="math notranslate nohighlight">\(x = (2,4,6)\)</span> og <span class="math notranslate nohighlight">\(y = (3,4,5)\)</span> og reiknið í
framhaldi:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(x + y\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(3x - 2y\)</span></p></li>
<li><p>innfeldið <span class="math notranslate nohighlight">\(x\cdot y\)</span></p></li>
<li><p>vigurinn <span class="math notranslate nohighlight">\(z\)</span> sem gefinn er með <span class="math notranslate nohighlight">\(z_i = 2x_iy_i + 3x_i\)</span></p></li>
</ul>
</div>
</section>
<section id="venjulegum-staerfraeifollum-beitt-a-vigra">
<h3><span class="section-number">10.3.3  </span>Venjulegum stærðfræðiföllum beitt á vigra<a class="headerlink" href="#venjulegum-staerfraeifollum-beitt-a-vigra" title="Permalink to this heading"></a></h3>
<p>Í NumPy eru sérstakar útgáfur af venjulegu stærðfræðiföllunum, sqrt, exp, log, sin,
cos o.s.frv. sem reikna fallsgildi í öllum stökum vigurs sem þeim er beitt á.
Þannig gefur <code class="docutils literal notranslate"><span class="pre">np.sqrt(np.array([4,9,25]))</span></code> vigurinn <span class="math notranslate nohighlight">\((2, 3, 5)\)</span>.</p>
<div class="aefing admonition">
<p class="admonition-title">Æfing: Stærðfræðiföll af vigrum</p>
<p>Búið til vigurinn <span class="math notranslate nohighlight">\((0, \pi/2, \pi, 3\pi/2, 2\pi)\)</span> með því að byrja á að
búa til <span class="math notranslate nohighlight">\((0, 1, 2, 3, 4)\)</span> með <code class="docutils literal notranslate"><span class="pre">np.arange</span></code> og margfalda hann svo með
<span class="math notranslate nohighlight">\(\pi\)</span> og deila með tveimur. Reiknið svo sínus, kósínus og tangens af
þessum vigri með <code class="docutils literal notranslate"><span class="pre">np.</span></code>-hornaföllunum.</p>
</div>
</section>
</section>
<section id="rokvigrar-og-rokvisun">
<span id="id3"></span><h2><span class="section-number">10.4  </span>Rökvigrar og rökvísun<a class="headerlink" href="#rokvigrar-og-rokvisun" title="Permalink to this heading"></a></h2>
<section id="rokvigrar-logical-vectors">
<span id="rokvigrar"></span><h3><span class="section-number">10.4.1  </span>Rökvigrar (<em>logical vectors</em>)<a class="headerlink" href="#rokvigrar-logical-vectors" title="Permalink to this heading"></a></h3>
<p>Við höfum aðeins fengið nasasjón af listum með rökgildum í kafla
<a class="reference internal" href="../kafli06/#sofn-af-tolum"><span class="std std-numref">6.3</span></a>. Slíkir listar (reyndar vigrar) eru talsvert notaðir
þegar unnið er með NumPy. Það eru nefnilega ekki bara reiknivirkjarnir +, – * og
/ og stærðfræðiföll sem virka stakvís á vigra heldur gildir það líka um
samanburðarvirkjana, &lt; &gt; &lt;= &gt;= == og !=.</p>
<p>Ef x og y eru jafnlangir vigrar þá er <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">y</span></code> vigur af rökgildum með
<span class="math notranslate nohighlight">\(i\)</span>-ta sæti satt (<code class="docutils literal notranslate"><span class="pre">True</span></code>) ef <span class="math notranslate nohighlight">\(x_i &lt; y_i\)</span>. Slíkan vigur má líka
reikna með yfirgripi (<em>comprehension</em>) sbr. kafla <a class="reference internal" href="../kafli06/#yfirgrip"><span class="std std-numref">6.7</span></a> þannig að:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">np.array([x[i]</span> <span class="pre">&lt;</span> <span class="pre">y[i]</span> <span class="pre">for</span> <span class="pre">i</span> <span class="pre">in</span> <span class="pre">range(len(x))])</span></code></p>
</div></blockquote>
<p>Svo mætti líka nota zip og fá sömu niðurstöðu með <code class="docutils literal notranslate"><span class="pre">np.array([xi</span> <span class="pre">&lt;</span> <span class="pre">yi</span> <span class="pre">for</span>
<span class="pre">(xi,yi)</span> <span class="pre">in</span> <span class="pre">zip(x,y)])</span></code>. Í framhaldi má svo nota innbyggðu föllin <span class="math notranslate nohighlight">\(any\)</span> og
<span class="math notranslate nohighlight">\(all\)</span> til að athuga hvort eitthvert eða öll stök rökvigranna séu sönn.</p>
<div class="synidaemi admonition">
<p class="admonition-title">Sýnidæmi: Jákvæð stök og samanburður vigra</p>
<p>Lát <span class="math notranslate nohighlight">\(x = (-1,3,-2,5)\)</span> og <span class="math notranslate nohighlight">\(y = (-2,2,3,4)\)</span>. Þá má gefa x og y
gildi og finna út hvar stök <span class="math notranslate nohighlight">\(x\)</span> og <span class="math notranslate nohighlight">\(y\)</span> eru jákvæð og hvar
<span class="math notranslate nohighlight">\(x &lt; y\)</span> með Python forritsbútnum:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="n">xpos</span> <span class="o">=</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="n">ypos</span> <span class="o">=</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="n">xlessy</span> <span class="o">=</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span>
</pre></div>
</div>
<p>og svo má kanna t.d. hvort öll y-in séu jákvæð (sem þau eru ekki) með</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">ypos</span><span class="p">):</span><span class="o">...</span>   <span class="c1"># eða:</span>
<span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span><span class="o">...</span>
</pre></div>
</div>
</div>
</section>
<section id="rokvisun-logical-indexing">
<h3><span class="section-number">10.4.2  </span>Rökvísun (<em>logical indexing</em>)<a class="headerlink" href="#rokvisun-logical-indexing" title="Permalink to this heading"></a></h3>
<p>Hægt er að nota rökvigur sem vísi í vigur. Ef x er einhver vigur af tölum og I
er vigur með rökgildum þá er <cite>x(I)</cite> vigur með stökum í sætum þar sem tilsvarandi
sæti í I er satt. Skoðum þetta betur í næsta sýnidæmi.</p>
<div class="synidaemi admonition">
<p class="admonition-title">Sýnidæmi: Rökvísun</p>
<p>Reiknum í framhaldi af síðasta sýnidæmi:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="n">ypos</span><span class="p">]</span>
</pre></div>
</div>
<p>Þá verður z vigurinn <span class="math notranslate nohighlight">\((-1,-2)\)</span> og w verður <span class="math notranslate nohighlight">\((-1,-2)\)</span>. Það mætti
líka nota skilyrt yfirgrip til að búa til z:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">np.array([xi</span> <span class="pre">for</span> <span class="pre">xi</span> <span class="pre">in</span> <span class="pre">x</span> <span class="pre">if</span> <span class="pre">xi</span> <span class="pre">&lt;</span> <span class="pre">0]</span></code></p>
</div></blockquote>
</div>
<p>Það er líka hægt að nota svona rökvísun vinstra megin í gildisgjafarsetningu til
að breyta hluta af stökum vigurs eins og gert er í sýnidæminu í næsta kafla.</p>
</section>
<section id="stakvisir-rokvirkjar">
<h3><span class="section-number">10.4.3  </span>Stakvísir rökvirkjar<a class="headerlink" href="#stakvisir-rokvirkjar" title="Permalink to this heading"></a></h3>
<p>Ef beita á rökaðgerðunum og/eða/ekki stakvíst (<em>element-wise</em>) á öll stök vigra
er Python með sérstaka rökvirkja, nefnilega <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>, <code class="docutils literal notranslate"><span class="pre">|</span></code> og <code class="docutils literal notranslate"><span class="pre">~</span></code> í stað
venjulegu virkjanna and, or og not. Ef x og y eru eins og í sýnidæminu í kafla
<a class="reference internal" href="#rokvigrar"><span class="std std-numref">10.4.1</span></a> þá verður <code class="docutils literal notranslate"><span class="pre">xpos</span> <span class="pre">&amp;</span> <span class="pre">ypos</span></code> rökvigur sem segir okkur hvar bæði
x og y eru jákvæðir (sem sé <code class="docutils literal notranslate"><span class="pre">(False,</span> <span class="pre">True,</span> <span class="pre">False,</span> <span class="pre">True)</span></code>), <code class="docutils literal notranslate"><span class="pre">xpos</span> <span class="pre">|</span> <span class="pre">ypos</span></code>
segir hvar annar hvor er jákvæður (<code class="docutils literal notranslate"><span class="pre">(False,</span> <span class="pre">True,</span> <span class="pre">True,</span> <span class="pre">True</span></code>) og <code class="docutils literal notranslate"><span class="pre">~xpos</span></code>
segir hvar x er ekki jákvæður (<code class="docutils literal notranslate"><span class="pre">(True,</span> <span class="pre">False,</span> <span class="pre">True,</span> <span class="pre">False)</span></code>).</p>
<p>Ath. ef formúla er með bæði samanburðarvirkja og stakvísan rökvirkja þarf að slá svigum utan um samanburðinn, t.d. <code class="docutils literal notranslate"><span class="pre">bothpos</span> <span class="pre">=</span> <span class="pre">(x</span> <span class="pre">&gt;</span> <span class="pre">0)</span> <span class="pre">&amp;</span> <span class="pre">(y</span> <span class="pre">&gt;</span> <span class="pre">0)</span></code>.</p>
<p>Hér er sýnidæmi sem sýnir hvernig má nota rökvísun og stakvísan ekki-virkja til
að reikna vigur með gildum falls sem skilgreint er með gaffalformúlu:</p>
<div class="synidaemi admonition">
<p class="admonition-title">Sýnidæmi:</p>
<p>Lát:</p>
<div class="math notranslate nohighlight">
\[\begin{split}f(x) =
\begin{cases} x^2 &amp; \text{ef } x &lt; 0 \\ x^3 &amp; \text{ef x &gt;= 0}
\end{cases}\end{split}\]</div>
<p>og x vera vigur af þétt liggjandi gildum t.d. <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">np.linspace(-2,2)</span></code>. Þá
er hægt að reikna fallsgildi í öllum x-unum með</p>
<figure class="align-right" style="width: 5cm">
<img alt="../_images/squarecube.jpg" src="../_images/squarecube.jpg" />
</figure>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">I</span> <span class="o">=</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="n">y</span><span class="p">[</span><span class="n">I</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">I</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span>
<span class="n">y</span><span class="p">[</span><span class="o">~</span><span class="n">I</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="o">~</span><span class="n">I</span><span class="p">]</span><span class="o">**</span><span class="mi">3</span>
</pre></div>
</div>
<p>Svo mætti teikna fallið með <code class="docutils literal notranslate"><span class="pre">plt.plot(x,y)</span></code>, því að Matplotlib getur teiknað
hvort sem er lista af tölum eða NumPy vigra.</p>
</div>
<div class="aefing admonition">
<p class="admonition-title">Æfing: Rökvigrar</p>
<p>Látið <span class="math notranslate nohighlight">\(x\)</span> og <span class="math notranslate nohighlight">\(y\)</span> vera vigrana <span class="math notranslate nohighlight">\((0, 14, 15, 16, 15, 13)\)</span> og
<span class="math notranslate nohighlight">\((5,8,7,0,2,4)\)</span>. Finnið rökvigra sem svara til <span class="math notranslate nohighlight">\(x_i \neq 0\)</span>,
<span class="math notranslate nohighlight">\(y_i \neq 0\)</span> og í framhaldi vigur með True þar sem bæði <span class="math notranslate nohighlight">\(x_i \neq
0\)</span> og <span class="math notranslate nohighlight">\(y_i \neq 0\)</span>. Búið svo til punktarit (<em>scatter-plot</em>) af jákvæðum
pörum <span class="math notranslate nohighlight">\((x_i,y_i)\)</span>.</p>
</div>
</section>
</section>
<section id="fylki-i-numpy">
<h2><span class="section-number">10.5  </span>Fylki í NumPy<a class="headerlink" href="#fylki-i-numpy" title="Permalink to this heading"></a></h2>
<section id="fylki-er-listi-af-listum">
<span id="listi-af-listum"></span><h3><span class="section-number">10.5.1  </span>Fylki er listi af listum<a class="headerlink" href="#fylki-er-listi-af-listum" title="Permalink to this heading"></a></h3>
<p>Í NumPy er fylki búið til með því að nota <code class="docutils literal notranslate"><span class="pre">np.array</span></code> fallið á lista af listum, sem hver um sig gefur eina línu í fylkinu, og NumPy skrifar líka fylki út með svipuðum hætti.</p>
<div class="synidaemi admonition">
<p class="admonition-title">Sýnidæmi: Fyrsta NumPy fylkið</p>
<p>Hér er forrit sem býr til fylkið <span class="math notranslate nohighlight">\(A\)</span> í kafla <a class="reference internal" href="#numpy-inngangur"><span class="std std-numref">10.1</span></a>
og skrifar það út:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span>
              <span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">]])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
</pre></div>
</div>
<p>Forritið prentar út:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[[1 2 3]
 [6 7 8]]
</pre></div>
</div>
</div>
<p>Það væri líka hægt að búa A til á einni línu með <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">=</span> <span class="pre">np.array([[1,2,3],[6,7,8]])</span></code>.</p>
</section>
<section id="stok-fylkis-linur-og-dalkar">
<h3><span class="section-number">10.5.2  </span>Stök fylkis, línur og dálkar<a class="headerlink" href="#stok-fylkis-linur-og-dalkar" title="Permalink to this heading"></a></h3>
<p>Hægt er að vísa í <span class="math notranslate nohighlight">\(a_{ij}\)</span> (þ.e.a.s. stakið í línu <span class="math notranslate nohighlight">\(i\)</span> og dálki
<span class="math notranslate nohighlight">\(j\)</span>) með <code class="docutils literal notranslate"><span class="pre">A[i,j]</span></code>. Lína i fæst með <code class="docutils literal notranslate"><span class="pre">A[i]</span></code> eða <code class="docutils literal notranslate"><span class="pre">A[i,:]</span></code> og dálkur j
fæst með <code class="docutils literal notranslate"><span class="pre">A[:,j]</span></code>. Eins og fyrir vigra þá byrjar Python að telja í 0 og þessar
vísanir má líka nota vinstra megin í gildisgjöf til að breyta stökum, línum eða
dálkum, t.d. <code class="docutils literal notranslate"><span class="pre">A[0,0]=37</span></code>, <code class="docutils literal notranslate"><span class="pre">A[0,:]=[2,2,2]</span></code> eða <code class="docutils literal notranslate"><span class="pre">A[:,0]=0</span></code> (setur öll stök
í fremsta dálki = 0)`.</p>
<div class="athugid admonition">
<p class="admonition-title">Athugasemd: Gildisgjöf gefur tilvísun</p>
<p>Ef gefin er skipunin</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">a0</span> <span class="pre">=</span> <span class="pre">A[0,:]</span></code></p>
</div></blockquote>
<p>þá er búin til <strong>tilvísun</strong> í fyrstu línuna en ekki ný breyta með gildi hennar
(sbr. kafla <a class="reference internal" href="../kafli05/#gildisgjof-gefur-tilvisun"><span class="std std-numref">5.3.4</span></a>, <a class="reference internal" href="../kafli06/#agerir-sem-duga-a-oll-sofn"><span class="std std-numref">6.2</span></a> og <a class="reference internal" href="#vigur-gefi-gildi"><span class="std std-numref">10.2.1</span></a>). Í raun er verið að gefa línunni
nafn, þannig að framhaldsskipunin <code class="docutils literal notranslate"><span class="pre">a0</span> <span class="pre">=</span> <span class="pre">[2,2,2]</span></code> mundi breyta fyrstu
línunni í A. Á sama hátt mundi skipunin</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">B</span> <span class="pre">=</span> <span class="pre">A</span></code></p>
</div></blockquote>
<p>búa til tilvísun í fylkið. Til að taka afrit á nýjan stað í minni tölvnnar má
nota aðferðina <code class="docutils literal notranslate"><span class="pre">copy</span></code>, t.d. <code class="docutils literal notranslate"><span class="pre">a0</span> <span class="pre">=</span> <span class="pre">A[0,:].copy()</span></code> eða <code class="docutils literal notranslate"><span class="pre">B</span> <span class="pre">=</span> <span class="pre">A.copy()</span></code>.</p>
</div>
</section>
<section id="nullfylki">
<h3><span class="section-number">10.5.3  </span>Núllfylki<a class="headerlink" href="#nullfylki" title="Permalink to this heading"></a></h3>
<p>Til að fá <span class="math notranslate nohighlight">\(m \times n\)</span> núllfylki má nota <code class="docutils literal notranslate"><span class="pre">Z</span> <span class="pre">=</span> <span class="pre">np.zeros((m,n))</span></code> og <code class="docutils literal notranslate"><span class="pre">Z</span> <span class="pre">=</span>
<span class="pre">np.zeros((m,n),int)</span></code> gefur heiltölu-núllfylki (það má líka skrifa
<code class="docutils literal notranslate"><span class="pre">np.zeros((m,n),dtype=int)</span></code>).</p>
<div class="aefing admonition">
<p class="admonition-title">Æfing: Margföldunartafla</p>
<ol class="arabic">
<li><p>Búið til <span class="math notranslate nohighlight">\(2 \times 2\)</span> núllfylki og prentið það út</p></li>
<li><p>Búið til fylkin</p>
<div class="math notranslate nohighlight">
\[\begin{split}C = \begin{pmatrix}1 &amp; 2\\3 &amp; 4\end{pmatrix}\;\text{ og }\;
D = \begin{pmatrix}5 &amp; 0\\0 &amp; 5\end{pmatrix}\end{split}\]</div>
<p>Leggið svo neðri línu <span class="math notranslate nohighlight">\(D\)</span> við efri línu <span class="math notranslate nohighlight">\(C\)</span> og prentið út nýja
<span class="math notranslate nohighlight">\(C\)</span>-ið.</p>
</li>
<li><p>Búið til <span class="math notranslate nohighlight">\(10 \times 10\)</span> fylki <span class="math notranslate nohighlight">\(M\)</span> með margföldunartöflu með
því að byrja með heiltölu-núllfylki og reikna svo:</p>
<div class="math notranslate nohighlight">
\[m_{ij} = (i+1)(j+1)\quad (i=0,\ldots,9, j=0,\ldots, 9)\]</div>
</li>
</ol>
</div>
</section>
<section id="bylting">
<h3><span class="section-number">10.5.4  </span>Bylting<a class="headerlink" href="#bylting" title="Permalink to this heading"></a></h3>
<p>Bylting (<em>transpose</em>) fylkis fæst með því að skipta á línum og dálkum.
Stærðfræðilegi rithátturinn fyrir byltingu fylkis <span class="math notranslate nohighlight">\(A\)</span> er <span class="math notranslate nohighlight">\(A^T\)</span>,
lesið „A bylt“. Í NumPy má rita <code class="docutils literal notranslate"><span class="pre">A.T</span></code> til að bylta fylki <code class="docutils literal notranslate"><span class="pre">A</span></code>, til dæmis:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
    <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]])</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">T</span>
<span class="nb">print</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>

<span class="c1"># Skrifar:</span>
<span class="p">[[</span><span class="mi">3</span> <span class="mi">0</span> <span class="mi">2</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">2</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">1</span> <span class="mi">0</span> <span class="mi">2</span><span class="p">]]</span>
</pre></div>
</div>
<div class="athugid admonition">
<p class="admonition-title">Athugasemd: Bylta fylkið er tilvísun</p>
<p>Fylkið B í dæminu hér að framan verður tilvísun í A bylt, sem uppfærist sjálfkrafa
ef A breytist. Til að fá nýtt fylki mætti nota <code class="docutils literal notranslate"><span class="pre">B</span> <span class="pre">=</span> <span class="pre">A.copy().T</span></code>.</p>
</div>
</section>
<section id="afpokkun">
<h3><span class="section-number">10.5.5  </span>Afpökkun<a class="headerlink" href="#afpokkun" title="Permalink to this heading"></a></h3>
<p>Í ýmsu samhengi virkar fylki eins og samstæða af línum sínum, bæði þegar því er gefið gildi (eins og við höfum séð) en líka þegar það er notað til að gefa gildi. Ef A er 3 x 3 fylki má þannig skrifa</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">(u,v,w)</span> <span class="pre">=</span> <span class="pre">A</span></code></p>
</div></blockquote>
<p>til að setja línur <code class="docutils literal notranslate"><span class="pre">A</span></code> inn í <code class="docutils literal notranslate"><span class="pre">u</span></code>, <code class="docutils literal notranslate"><span class="pre">v</span></code> og <code class="docutils literal notranslate"><span class="pre">w</span></code>. Það má líka sleppa svigunum: <code class="docutils literal notranslate"><span class="pre">u,v,w</span> <span class="pre">=</span> <span class="pre">A</span></code>. Hér virkar <code class="docutils literal notranslate"><span class="pre">A</span></code> eins og þrennd af línum sínum, og þegar þrennd er gefið gildi með <code class="docutils literal notranslate"><span class="pre">A</span></code> fer hver lína inn í sitt stak – eftir <code class="docutils literal notranslate"><span class="pre">par</span> <span class="pre">=</span> <span class="pre">(3,4);</span> <span class="pre">(u,v)</span> <span class="pre">=</span> <span class="pre">par</span></code> verður <code class="docutils literal notranslate"><span class="pre">u=3</span></code> og <code class="docutils literal notranslate"><span class="pre">v=4</span></code>. Þetta er kallað <cite>afpökkun</cite> (<em>unpacking</em>).</p>
<p>Slík afpökkun er notuð í næsta kafla þegar lesið er inn í NumPy vigra úr línum eða dálkum í skrá, og byltingin úr síðasta kafla er líka notuð.</p>
<div class="aefing admonition">
<p class="admonition-title">Æfing: Bylting og afpökkun</p>
<p>Búið til fylkið:</p>
<div class="math notranslate nohighlight">
\[\begin{split}M = \begin{pmatrix}1 &amp; 4\\2 &amp; 5\\3 &amp; 6\end{pmatrix}\end{split}\]</div>
<p>Náið svo í dálka þess inn í tvo vigra með því að bylta því fyrst og afpakka svo.</p>
</div>
</section>
<section id="foll-til-a-bua-til-fylki">
<h3><span class="section-number">10.5.6  </span>Föll til að búa til fylki<a class="headerlink" href="#foll-til-a-bua-til-fylki" title="Permalink to this heading"></a></h3>
<p>Við höfum þegar séð hvernig hægt er að búa til fylki með því að telja upp stökin
í því og líka hvernig búa má til núllfylki með fallinu <code class="docutils literal notranslate"><span class="pre">np.zeros</span></code>. Hér er
tafla yfir fleiri föll til að búa til fylki, m.a. nokkur sem verður nánar lýst í
seinni köflum.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">zeros((n,m))</span></code></p></td>
<td><p>Skilar <span class="math notranslate nohighlight">\(n \times m\)</span> núllfylki</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">eye(n)</span></code></p></td>
<td><p><span class="math notranslate nohighlight">\(n \times n\)</span> einingafylki, sjá kafla <a class="reference internal" href="../kafli11/#nullfylki-og-einingafylki"><span class="std std-numref">11.2</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">diag(v)</span></code></p></td>
<td><p>(fyrir <span class="math notranslate nohighlight">\(n\)</span>-vigur <code class="docutils literal notranslate"><span class="pre">v</span></code>) skilar <span class="math notranslate nohighlight">\(n \times n\)</span> hornalínufylki með stökum
<code class="docutils literal notranslate"><span class="pre">v</span></code> á <br> hornalínunni (sjá <a class="reference external" href="https://cs.hi.is/strei/kafli02/#ymis-vigur-og-fylkjahugtok">Fyrirlestrarnótur um stærðfræði og reiknifræði</a>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">inv(A)</span></code></p></td>
<td><p>andhverfa <code class="docutils literal notranslate"><span class="pre">A</span></code> (sjá kafla <a class="reference internal" href="../kafli11/#andhverfur-og-akveur"><span class="std std-numref">11.5</span></a>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">rng.random((n,m))</span></code></p></td>
<td><p><span class="math notranslate nohighlight">\(n \times m\)</span> slembifylki (sjá kafla <a class="reference internal" href="../kafli13/#slembitolur-me-numpy"><span class="std std-numref">13.3</span></a>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">np.c_[x,y]</span></code></p></td>
<td><p>(fyrir <span class="math notranslate nohighlight">\(n\)</span>-vigra <code class="docutils literal notranslate"><span class="pre">x</span></code> og <code class="docutils literal notranslate"><span class="pre">y</span></code>) skilar <span class="math notranslate nohighlight">\(n \times 2\)</span> fylki með
dálka <code class="docutils literal notranslate"><span class="pre">x</span></code> og <code class="docutils literal notranslate"><span class="pre">y</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">np.vstack((x,y))</span></code></p></td>
<td><p>(fyrir <cite>n</cite>-vigra <code class="docutils literal notranslate"><span class="pre">x</span></code> og <code class="docutils literal notranslate"><span class="pre">y</span></code>) skilar <span class="math notranslate nohighlight">\(2 \times n\)</span> fylki með línur
<code class="docutils literal notranslate"><span class="pre">x</span></code> og <code class="docutils literal notranslate"><span class="pre">y</span></code></p></td>
</tr>
</tbody>
</table>
<p>Í kaflanum um slembitölur (<a class="reference internal" href="../kafli13/#slembitolur-me-numpy"><span class="std std-numref">13.3</span></a>) er lýst fleiri
föllum til að búa til slembifylki. Varðandi neðstu tvö föllin þá eru líka til
<code class="docutils literal notranslate"><span class="pre">np.r_</span></code> og <code class="docutils literal notranslate"><span class="pre">np.hstack</span></code> til að skeyta saman lóðrétt og lárétt en notkun
þeirra er óþægilegri en þessara tveggja.</p>
</section>
</section>
<section id="innlestur-og-utskrift">
<span id="inn-og-ut"></span><h2><span class="section-number">10.6  </span>Innlestur og útskrift<a class="headerlink" href="#innlestur-og-utskrift" title="Permalink to this heading"></a></h2>
<section id="talnalestur">
<h3><span class="section-number">10.6.1  </span>Talnalestur<a class="headerlink" href="#talnalestur" title="Permalink to this heading"></a></h3>
<p>Það er fremur auðvelt að lesa fylki úr textaskrá með fallinu <code class="code docutils literal notranslate"><span class="pre">loadtxt</span></code>.
Skráin verður að hafa jafnmörg svið (jafnmargar tölur) í hverri línu og sjálfgefið er að sviðin séu afmörkuð með bilum (sbr. kafla <a class="reference internal" href="../kafli08/#csv-lestur-bilafmark"><span class="std std-numref">8.3.4</span></a>). Fyrir utan
textaskrár sem geymdar eru í núverandi möppu getur <code class="docutils literal notranslate"><span class="pre">loadtxt</span></code> lesið skrár sem
eru á netinu án vandkvæða. Hér eru nokkur dæmi sem skýra notkunina:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">skrá</span> <span class="o">=</span> <span class="s1">&#39;datafile.txt&#39;</span>                 <span class="c1">#</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">skrá</span><span class="p">)</span>                  <span class="c1"># les alla skrána inn í eitt fylki A</span>
<span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">skrá</span><span class="p">)</span>              <span class="c1"># les þriggja línu skrá inn í þrjá vigra</span>
<span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">skrá</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>            <span class="c1"># les þriggja dálka skrá inn í þrjá vigra</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">skrá</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>      <span class="c1"># sleppir fyrstu línunni</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">skrá</span><span class="p">,</span> <span class="n">usecols</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>   <span class="c1"># les bara fyrstu tvo dálkana</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">skrá</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>   <span class="c1"># les csv-skrá</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://cs.hi.is/python/&#39;</span>      <span class="c1">#</span>
<span class="n">netskrá</span> <span class="o">=</span> <span class="n">url</span> <span class="o">+</span> <span class="s1">&#39;hiti-urkoma.txt&#39;</span>     <span class="c1"># skrá á netinu</span>
<span class="p">(</span><span class="n">ár</span><span class="p">,</span><span class="n">hiti</span><span class="p">,</span><span class="n">úrk</span><span class="p">)</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">netskrá</span><span class="p">)</span><span class="o">.</span><span class="n">T</span> <span class="c1"># les hana inn í þrjá vigra</span>
</pre></div>
</div>
<p>Þessi dæmi miðast við að skráin innihaldi bara tölur, en þó mega vera
textastrengir í fyrstu línunni ef henni er sleppt með <code class="docutils literal notranslate"><span class="pre">skiprows</span></code>, og eins mega
vera dálkar með strengjum ef þeim er sleppt með <code class="docutils literal notranslate"><span class="pre">usecols</span></code>. Takið sérstaklega
eftir hvernig bylting er notuð í fjórðu línunni, og líka í neðstu línunni, til
að breyta þremur dálkum í þrjár línur, sem svo er afpakkað inn í þrjá vigra. Í
næsta kafla sjáum við hvernig hægt er að lesa inn textadálka.</p>
<div class="aefing admonition">
<p class="admonition-title">Æfing: loadtxt</p>
<ol class="arabic simple">
<li><p>Lesið skrána <a class="reference external" href="https://cs.hi.is/python/hiti-urkoma.txt">https://cs.hi.is/python/hiti-urkoma.txt</a> og plottið svo ártal og úrkomu.</p></li>
<li><p>Lesið <a class="reference external" href="https://cs.hi.is/python/malmar.txt">https://cs.hi.is/python/malmar.txt</a> og
teiknið punktarit. Það þarf að sleppa bæði fyrstu línunni og fyrsta dálkinum.</p></li>
</ol>
</div>
</section>
<section id="utskrift-talna">
<h3><span class="section-number">10.6.2  </span>Útskrift talna<a class="headerlink" href="#utskrift-talna" title="Permalink to this heading"></a></h3>
<p>Til að skrifa fylki í skrá má nota <code class="docutils literal notranslate"><span class="pre">savetxt</span></code> fallið:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">np.savetxt('skrá.txt',</span> <span class="pre">x,</span> <span class="pre">fmt='«snið»')</span></code> (t.d. með f.«snið» = <code class="docutils literal notranslate"><span class="pre">%5.2f</span></code>)</p>
</div></blockquote>
</section>
<section id="innlestur-skraa-me-textadalkum">
<span id="numpy-skrar-me-textadalkum"></span><h3><span class="section-number">10.6.3  </span>Innlestur skráa með textadálkum<a class="headerlink" href="#innlestur-skraa-me-textadalkum" title="Permalink to this heading"></a></h3>
<p>Í Numpy er hægt að lesa textafylki með því nota <code class="docutils literal notranslate"><span class="pre">loadtxt(...,</span> <span class="pre">dtype=str)</span></code>.
Síðan er hægt að nota aðferðirnar <code class="docutils literal notranslate"><span class="pre">astype</span></code> til að ná í talnadálka og
<code class="docutils literal notranslate"><span class="pre">tolist</span></code> til að breyta textadálkum í lista af strengjum. Þetta er útskýrt með
eftirfarandi dæmi.</p>
<div class="synidaemi admonition">
<p class="admonition-title">Sýnidæmi: Lestur textadálka</p>
<p>Skráin <a class="reference external" href="https://cs.hi.is/python/malmar.txt">https://cs.hi.is/python/malmar.txt</a> er með streng í fyrsta dálki,
kommutölu í öðrum dálki og heiltölu í þeim þriðja. Hún er líka með titillínu.
Hér er forrit sem les skrána</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">skrá</span> <span class="o">=</span> <span class="s2">&quot;https://cs.hi.is/python/malmar.txt&quot;</span>
<span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="n">e</span><span class="p">,</span><span class="n">b</span><span class="p">)</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">skrá</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
<span class="n">málmur</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">eðlisþ</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<span class="n">bræðslum</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">málmur</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">eðlisþ</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">bræðslum</span><span class="p">)</span>
</pre></div>
</div>
<p>Forritið prentar út</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[&#39;Ál&#39;, &#39;Járn&#39;, &#39;Kopar&#39;, &#39;Gull&#39;]
[ 2.7   7.87  8.96 19.3 ]
[ 933 1538 1085 1064]
</pre></div>
</div>
<p>Það mætti líka lesa með <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">=</span> <span class="pre">np.loadtxt(skrá...).T</span></code> og ná svo t.d. í
málmanöfnin með <code class="docutils literal notranslate"><span class="pre">málmur</span> <span class="pre">=</span> <span class="pre">A[0].tolist()</span></code>.</p>
</div>
</section>
<section id="csv-skar-ur-excel">
<span id="skrar-ur-excel"></span><h3><span class="section-number">10.6.4  </span>CSV-skár úr Excel<a class="headerlink" href="#csv-skar-ur-excel" title="Permalink to this heading"></a></h3>
<p>Til að lesa Excel-skrár eru tvær leiðir bestar:</p>
<ol class="arabic simple">
<li><p>Að byrja að vista þær sem csv-skrár og lesa inn með NumPy</p></li>
<li><p>Að nota Pandas</p></li>
</ol>
<p>Lítum hér á fyrri möguleikann. Í skránni <a class="reference external" href="https://cs.hi.is/python/allir-malmar.xlsx">https://cs.hi.is/python/allir-malmar.xlsx</a> eru upplýsingar um alla 70 málmana sem hafa sætistölu minni en 94 (plúton), nánar tiltekið (dæmi í svigum):</p>
<ul class="simple">
<li><p>efnatákn (Fe)</p></li>
<li><p>íslenskt nafn (járn)</p></li>
<li><p>sætistala (26)</p></li>
<li><p>eðlisþyngd (7,87)</p></li>
<li><p>bræðslumark (1535)</p></li>
<li><p>enskt nafn (iron)</p></li>
</ul>
<p>Í Excel er hægt að vista skrána sem csv-skrá með því að velja <em>File – Save As…</em>. Það hefur þegar verið gert og niðurstaðan skrifuð í</p>
<blockquote>
<div><p><a class="reference external" href="https://cs.hi.is/python/allir-malmar.txt">https://cs.hi.is/python/allir-malmar.txt</a></p>
</div></blockquote>
<p>Þetta var gert með tölvuna stillta á íslensku og þá koma kommur í stað punkta í eðlisþyngdirnar. CSV-skrána má lesa inn með:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">skrá</span> <span class="o">=</span> <span class="s2">&quot;https://cs.hi.is/python/allir-malmar.txt&quot;</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">skrá</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;;&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;str&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
<span class="n">efnatákn</span>    <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">nafn</span>        <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">sætistala</span>   <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">A3</span>          <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">char</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>
<span class="n">eðlisþyngd</span>  <span class="o">=</span> <span class="n">A3</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<span class="n">bræðslumark</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">enskt_nafn</span>  <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<p>Hér hefur fallið <code class="docutils literal notranslate"><span class="pre">np.char.replace</span></code> verið notað til að breyta kommutölunum í
enska útgáfu, sem er sú eina sem Python skilur.</p>
<div class="aefing admonition">
<p class="admonition-title">Æfing: Allir málmar</p>
<ol class="arabic simple">
<li><p>Smellið bæði á Excel-skrána (ef þið eruð með Excel) og CSV-skrána og
skoðið innihaldið</p></li>
<li><p>Lesið csv-skrána með því að keyra forritsbútinn hér á undan og búið svo
til punktarit af sætistölu og eðlisþyngd.</p></li>
<li><p>Búið til súlurit af bræðslumarki</p></li>
<li><p>Opnið Excel-skrána og búið til csv-skrá (ef þið hafið Excel)</p></li>
</ol>
</div>
</section>
</section>
<section id="listi-yfir-skrar-a-cs-hi-is-python">
<h2><span class="section-number">10.7  </span>Listi yfir skrár á cs.hi.is/python<a class="headerlink" href="#listi-yfir-skrar-a-cs-hi-is-python" title="Permalink to this heading"></a></h2>
<p>Eftirfarandi skrár sem koma við sögu ýmist í sýnidæmum, æfingum eða verkefnum í
þessum fyrirlestrarnótum eru á <code class="docutils literal notranslate"><span class="pre">https://cs.hi.is/python</span></code>. Þær má nota til að
prófa ýmsar aðferðir til að lesa skrár og vinna með gögn í NumPy (eða Pandas).</p>
<ul class="simple">
<li><p><a class="reference external" href="https://cs.hi.is/python/ord.txt">ord.txt</a></p></li>
<li><p><a class="reference external" href="https://cs.hi.is/python/karfa.txt">karfa.txt</a></p></li>
<li><p><a class="reference external" href="https://cs.hi.is/python/hiti-urkoma.txt">hiti-urkoma.txt</a></p></li>
<li><p><a class="reference external" href="https://cs.hi.is/python/data.txt">data.txt</a></p></li>
<li><p><a class="reference external" href="https://cs.hi.is/python/simaskra.txt">simaskra.txt</a></p></li>
<li><p><a class="reference external" href="https://cs.hi.is/python/nofn.txt">nofn.txt</a></p></li>
<li><p><a class="reference external" href="https://cs.hi.is/python/einkunn.txt">einkunn.txt</a></p></li>
<li><p><a class="reference external" href="https://cs.hi.is/python/kennitolur.txt">kennitolur.txt</a></p></li>
<li><p><a class="reference external" href="https://cs.hi.is/python/kosningar-2021.txt">kosningar-2021.txt</a></p></li>
<li><p><a class="reference external" href="https://cs.hi.is/python/flokksnofn.txt">flokksnofn.txt</a></p></li>
<li><p><a class="reference external" href="https://cs.hi.is/python/flokkslitir.txt">flokkslitir.txt</a></p></li>
<li><p><a class="reference external" href="https://cs.hi.is/python/malmar.txt">malmar.txt</a></p></li>
<li><p><a class="reference external" href="https://cs.hi.is/python/allir-malmar.txt">allir-malmar.txt</a></p></li>
<li><p><a class="reference external" href="https://cs.hi.is/python/blom.txt">blom.txt</a></p></li>
<li><p><a class="reference external" href="https://cs.hi.is/python/evropulond.txt">evropulond.txt</a></p></li>
<li><p><a class="reference external" href="https://cs.hi.is/python/hofudborgir.txt">hofudborgir.txt</a></p></li>
</ul>
<p>Aðferðirnar sem lýst er að framan duga ekki til að lesa skrána <strong>simaskra.txt</strong>,
en hún er með dálka aðskilda með kommu og runu af bilum. Til að lesa hana má
nota:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">nafn</span><span class="p">,</span> <span class="n">sími</span><span class="p">,</span> <span class="n">heimili</span><span class="p">)</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">genfromtxt</span><span class="p">(</span>
    <span class="s1">&#39;https://cs.hi.is/python/simaskra.txt&#39;</span><span class="p">,</span>
    <span class="n">skip_header</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">delimiter</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span>
    <span class="n">autostrip</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">dtype</span> <span class="o">=</span> <span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>
</div>
<p>Fallið <em>genfromtxt</em> er systurfall <em>loadtxt</em> með aðeins aðra valkosti, m.a.
<em>autostrip</em>, auk þess sem <em>skip_header</em> kemur í stað <em>skiprows</em>. Vegna þess að
það eru engir talnadálkar er hægt er að hengja <code class="docutils literal notranslate"><span class="pre">.tolist()</span></code> aftan á
innlestrarskipunina til að breyta öllum dálkunum í venjulega lista af strengjum
í einu lagi.</p>
<p>Önnur skrá sem er sérstök er <strong>flokksnofn.txt</strong> sem er með svið aðskilin með
tab-táknum. Til að lesa hana með <code class="docutils literal notranslate"><span class="pre">np.loadtxt</span></code> dugar að setja <code class="docutils literal notranslate"><span class="pre">delimiter</span> <span class="pre">=</span>
<span class="pre">'\t'</span></code>. Svo eru heldur engir talnadálkar í þeirri skrá svo það er líka hægt að
hengja <code class="docutils literal notranslate"><span class="pre">.T.tolist()</span></code> aftan á <code class="docutils literal notranslate"><span class="pre">loadtxt</span></code>-kallið (sjá <a class="reference internal" href="../verkefni/#kosningaurslit"><span class="std std-numref">verkefni
16c</span></a>).</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../kafli09/" class="btn btn-neutral float-left" title="9 Teikning með Matplotlib" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../kafli11/" class="btn btn-neutral float-right" title="11 Reiknað með fylkjum" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

<style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search,
    .wy-nav-top {
        background: #10099F;
    }

    /* Sidebar */
    .wy-nav-side {
        background: #262626;
    }
</style>




</body>
</html>