<!DOCTYPE html>
<html class="writer-html5" lang="is" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>13 Slembitölur &mdash; Fyrirlestrarnótur um Python 2021</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/python.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/edbook.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon_2.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/togglebutton.js"></script>
        <script src="../_static/translations.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>

<!-- hoverrole.py css code -->
<style type="text/css">
    a.tooltip {
        outline: none;
        border-bottom: thin dotted;
        background: #ffeedd
    }

    a.tooltip strong {
        line-height: 30px;
    }

    a.tooltip:hover {
        text-decoration: none;
    }

    a.tooltip span {
        z-index: 10;
        display: none;
        padding: 14px 20px;
        margin-top: -30px;
        margin-left: 12px;
        width: 310px;
        line-height: 16px;
    }

    a.tooltip:hover span {
        display: inline;
        position: absolute;
        color: #111;
        border: 1px solid #DCA;
        background: #fffAF0;
    }

    .callout {
        z-index: 20;
        position: absolute;
        top: 30px;
        border: 0;
        left: -12px;
    }

    /*CSS3*/
    a.tooltip span {
        border-radius: 4px;
        box-shadow: 5px 5px 8px #CCC;
    }
</style>
<!-- End hoverrole.py css code -->

<style type="text/css">
    .sagecell .CodeMirror-scroll {
        overflow-y: hidden;
        overflow-x: auto;
    }

    .sagecell .CodeMirror {
        height: auto;
    }

    /* - Begin equation reference style - */
    h6.eqno {
        display: inline-block;
        padding-left: 10px;
    }

    h6 .headerlink {
        display: inline-block !important;
    }

    h6 .headerlink:after {
        visibility: hidden !important;
    }

    h6 .headerlink:hover:after {
        visibility: visible !important;
    }

    .eqno:hover>.headerlink:after {
        visibility: visible !important;
    }

    table>caption>.headerlink {
        visibility: hidden !important;
    }

    table>caption>.headerlink {
        visibility: hidden !important;
    }

    /* - End - */
</style>
<style type="text/css">
    /* .ace_content .ace_layer .ace_line_group .ace_line * { */
    /*     font-size: 15px !important; */
    /* } */
    /* div[class^='highlight'] pre {font-size:15px} */
    div.code-block-caption {
        margin-bottom: 4px
    }
</style>

    <link rel="index" title="Atriðaskrá" href="../genindex/" />
    <link rel="search" title="Leit" href="../search/" />
    <link rel="next" title="14 Millikafli: Um reiknifræði og gagnavísindi" href="../kafli14/" />
    <link rel="prev" title="12 Dæmi um hagnýtingu fylkjareikninga" href="../kafli12/" />



<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> -->
<script type="text/javascript" src="https://cdn.geogebra.org/apps/deployggb.js"></script>


 

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../" class="icon icon-home">
            Fyrirlestrarnótur um Python
          </a>
              <div class="version">
                2021
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../kafli01/">1  Inngangur: Um Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli02/">2  Dæmi um Python forrit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli03/">3  Umhverfi fyrir Python: Jupyter og Colab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli04/">4  Grunnatriði Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli05/">5  Söfn: Eitt nafn en mörg gildi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli06/">6  Helstu aðgerðir fyrir söfn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli07/">7  Uppflettitöflur</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli08/">8  Skrár</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli09/">9  Teikning með Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli10/">10  NumPy pakkinn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli11/">11  Reiknað með fylkjum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli12/">12  Dæmi um hagnýtingu fylkjareikninga</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">13  Slembitölur</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#random-einingin">13.1  Random-einingin</a></li>
<li class="toctree-l2"><a class="reference internal" href="#innskot-fjoldi-aukastafa-i-numpy-prentun">13.2  Innskot: Fjöldi aukastafa í NumPy prentun</a></li>
<li class="toctree-l2"><a class="reference internal" href="#slembitolur-me-numpy">13.3  Slembitölur með NumPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#upphafsstilling-slembitalna">13.4  Upphafsstilling slembitalna</a></li>
<li class="toctree-l2"><a class="reference internal" href="#slembiro-og-slembiurtak">13.5  Slembiröð og slembiúrtak</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gervigogn">13.6  Gervigögn</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../kafli14/">14  Millikafli: Um reiknifræði og gagnavísindi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafli15/">15  Pandas</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../verkefnafyrirsogn/">V E R K E F N I</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">Fyrirlestrarnótur um Python</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">13  </span>Slembitölur</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/kafli13.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="slembitolur">
<h1><span class="section-number">13  </span>Slembitölur<a class="headerlink" href="#slembitolur" title="Permalink to this heading"></a></h1>
<p><strong>Slembitölur</strong> (<em>random numbers</em>) koma oft við sögu í forritun. Til dæmis eru þær nauðsynlegur hluti af hermun (<em>simulation</em>) þar sem líkt er eftir raunverulegu ferli eða atburðarás í tölvu, þær eru notaðar til að forrita slembin spil, m.a. teningaspil og spil fyrir venjulegan 52 spila stokk, þær eru mikið notaðar í tölfræðilegri greiningu, og þær nýtast til að búa til gervigögn. Flestöll nútíma-forritunarmál geta búið til slembitölur, og er Python þar engin undantekning. Við höfum þegar kynnst þeim lauslega í köflum <a class="reference internal" href="../kafli09/#sulurit"><span class="std std-numref">9.2.3</span></a>, <a class="reference internal" href="../kafli09/#daemi-um-legend"><span class="std std-numref">9.5.2</span></a> og <a class="reference internal" href="../kafli09/#daemi-um-hist"><span class="std std-numref">9.5.3</span></a> (kíkið gjarnan á þessa kafla).</p>
<section id="random-einingin">
<h2><span class="section-number">13.1  </span>Random-einingin<a class="headerlink" href="#random-einingin" title="Permalink to this heading"></a></h2>
<p>Einfaldasta leiðin til að búa til slembitölur er að nota föll úr einingunni <em>random</em>. Með henni er hægt að búa til bæði jafnt dreifðar og normaldreifðar slembitölur (kommutölur), og einnig slembiheiltölur. Til þess má nota föllin <code class="docutils literal notranslate"><span class="pre">random</span></code>, <code class="docutils literal notranslate"><span class="pre">gauss</span></code> og <code class="docutils literal notranslate"><span class="pre">randint</span></code>, svona:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span><span class="p">,</span> <span class="n">gauss</span><span class="p">,</span> <span class="n">randint</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="p">()</span>                         <span class="c1"># skilar slembitölu, 0 ≤ x &lt; 1</span>
<span class="n">k</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>                     <span class="c1"># skilar slembiheiltölu,1 ≤ k ≤ 8</span>
<span class="n">K</span> <span class="o">=</span> <span class="p">[</span><span class="n">randint</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">)]</span> <span class="c1"># skilar 10 slembiheiltölum í {5,6,7}</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">gauss</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>                       <span class="c1"># z er normaldreift með meðalgildi 1</span>
                                     <span class="c1"># og staðalfrávik 3, ritað z ~ N(1,3)</span>
</pre></div>
</div>
<p>Nafnið gauss kemur til vegna þess að normaldreifing er stundum kölluð <em>Gauss-dreifing</em> eftir
stærðfræðingnum merka <a class="reference external" href="https://en.wikipedia.org/wiki/Carl_Friedrich_Gauss">Carl Gauss</a>.</p>
<div class="synidaemi admonition">
<p class="admonition-title">Sýnidæmi: Slembispil</p>
<p>Eftirfarandi forrit hermir eftir því að dregið sé spil úr spilastokk. Fyrst
er sortin ákvörðuð með því að draga tölu í <span class="math notranslate nohighlight">\(\{0,1,2,3\}\)</span> og svo er
dregin tala úr <span class="math notranslate nohighlight">\(\{0,1,2,...,12\}\)</span>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>
<span class="n">sort</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;hjarta&#39;</span><span class="p">,</span> <span class="s1">&#39;spaða&#39;</span><span class="p">,</span> <span class="s1">&#39;tígul&#39;</span><span class="p">,</span> <span class="s1">&#39;laufa&#39;</span><span class="p">]</span>
<span class="n">nafn</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ás&#39;</span><span class="p">,</span> <span class="s1">&#39;tvistur&#39;</span><span class="p">,</span> <span class="s1">&#39;þristur&#39;</span><span class="p">,</span> <span class="s1">&#39;fjarki&#39;</span><span class="p">,</span> <span class="s1">&#39;fimma&#39;</span><span class="p">,</span> <span class="s1">&#39;sexa&#39;</span><span class="p">,</span>
        <span class="s1">&#39;sjöa&#39;</span><span class="p">,</span> <span class="s1">&#39;átta&#39;</span><span class="p">,</span> <span class="s1">&#39;nía&#39;</span><span class="p">,</span> <span class="s1">&#39;tía&#39;</span><span class="p">,</span> <span class="s1">&#39;gosi&#39;</span><span class="p">,</span> <span class="s1">&#39;drottning&#39;</span><span class="p">,</span> <span class="s1">&#39;kóngur&#39;</span><span class="p">]</span>
<span class="n">litur</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">gildi</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">spil</span> <span class="o">=</span> <span class="n">sort</span><span class="p">[</span><span class="n">litur</span><span class="p">]</span> <span class="o">+</span> <span class="n">nafn</span><span class="p">[</span><span class="n">gildi</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">spil</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="aefing admonition">
<p class="admonition-title">Æfing: Pókerhendur</p>
<figure class="align-right">
<a class="reference internal image-reference" href="../_images/pókerhönd.jpg"><img alt="../_images/p%C3%B3kerh%C3%B6nd.jpg" src="../_images/p%C3%B3kerh%C3%B6nd.jpg" style="width: 6cm;" /></a>
</figure>
<p>Afritið forritið að ofan inn í vinnubók og keyrið það nokkrum sinnum. Breytið
svo forritinu í fall, <code class="docutils literal notranslate"><span class="pre">dragaspil()</span></code> sem skilar streng með dregnu spili.</p>
<ol class="arabic simple">
<li><p>Búið í framhaldi til forrit sem dregur fimm spil, sem er einmitt fjöldi
spila í pókerhönd. Athugið að hér er smá svindl í gangi því það verður
möguleiki á að draga sama spil tvisvar. Í kafla <a class="reference internal" href="#slembiro"><span class="std std-numref">13.5</span></a> verður ráðin bót á
því.</p></li>
<li><p>[Vinnist í samstarfi við kennara.] Búið til fall sem kannar hvort pókerhönd
hafi tvær tvennur. Skrifið í famhaldi forrit sem finnur líkurnar á
að fá tvær tvennur með hermun (þá eru dregnar margar hendur og athugað hve
stórt hlutfall þeirra er hönd með tveim tvennum).</p></li>
</ol>
</div>
</section>
<section id="innskot-fjoldi-aukastafa-i-numpy-prentun">
<span id="innskot"></span><h2><span class="section-number">13.2  </span>Innskot: Fjöldi aukastafa í NumPy prentun<a class="headerlink" href="#innskot-fjoldi-aukastafa-i-numpy-prentun" title="Permalink to this heading"></a></h2>
<p>Til að prenta slembivigra og -fylki er hentugt að geta takmarkað fjölda
aukastafa. Það er hægt með fallinu <code class="docutils literal notranslate"><span class="pre">np.set_printoptions</span></code>. Þetta fall hefur
ýmsa stika en hér látum við duga að segja frá þremur: <code class="docutils literal notranslate"><span class="pre">precision</span> <span class="pre">=</span> <span class="pre">n</span></code> og
<code class="docutils literal notranslate"><span class="pre">floatmode</span> <span class="pre">=</span> <span class="pre">&quot;fixed&quot;</span></code> gefur alltaf <em>n</em> aukastafi (án floatmode koma ≤ n
stafir), og <code class="docutils literal notranslate"><span class="pre">suppress</span> <span class="pre">=</span> <span class="pre">True</span></code> þýðir að engar tölur eru prentaðar með
tugveldistáknun (t.d. -6.33e08 eða 5.22e-12). Til að vigurinn sem kemur við sögu
í <a class="reference internal" href="../verkefni/#toluleg-diffrun"><span class="std std-numref">verkefni 10</span></a> prentist líkt og þar er sýnt má nota:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">np.set_printoptions(suppress=True,</span> <span class="pre">floatmode=&quot;fixed&quot;,</span> <span class="pre">precision=3)</span></code></p>
</div></blockquote>
<p>Sama snið er alltaf notað fyrir öll stök í vigri eða fylki, og ef vigur er með eitt
lítið stak hefur það sem sé áhrif á prentun allra stakanna. Hér er dæmi til skýringar:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Lát x = np.array([0.000002, 1.25, 12.345]). Þá prentar print(x) út:
- með suppress=False: [2.000e-06 1.250e+00 1.235e+01]
- með suppress=True:  [ 0.000  1.250 12.345]
</pre></div>
</div>
</section>
<section id="slembitolur-me-numpy">
<h2><span class="section-number">13.3  </span>Slembitölur með NumPy<a class="headerlink" href="#slembitolur-me-numpy" title="Permalink to this heading"></a></h2>
<p>Með NumPy er hægt að búa til slembivigra og slembifylki. Nýjustu útgáfur mæla með
að byrjað sé á að skilgreina:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">rng</span> <span class="pre">=</span> <span class="pre">np.random.default_rng()</span></code></p>
</div></blockquote>
<p>(rng er skammstöfun á <em>random number generator</em>, <em>slembitölugjafi</em>). Eftir það
má svo nota föllin <code class="docutils literal notranslate"><span class="pre">rng.random</span></code>, <code class="docutils literal notranslate"><span class="pre">rng.normal</span></code> og <code class="docutils literal notranslate"><span class="pre">rng.integers</span></code> til að búa
til slembivigra og -fylki, og reyndar er gott að þekkja líka fallið
<code class="docutils literal notranslate"><span class="pre">rng.uniform</span></code> sem býr til jafnt dreifðar slembitölur á almennu bili <span class="math notranslate nohighlight">\([a,b]\)</span>.</p>
<p>Hér er svo dæmi sem sýnir hvernig þessi NumPy slembiföll eru notuð. Takið eftir
hvernig þeirri reglu er fylgt að rita <code class="docutils literal notranslate"><span class="pre">size=</span></code> fyrir framan stærðarviðföng en
ekki önnur.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">()</span>
<span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">suppress</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">precision</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">floatmode</span><span class="o">=</span><span class="s2">&quot;fixed&quot;</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>     <span class="c1"># 8 normaldreifðar tölur úr N(5,2)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">integers</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>  <span class="c1"># 25 heiltölur, allar 0 eða 1</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>       <span class="c1"># 2 x 3 slembifylki, tölur í [0,1]</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>   <span class="c1"># 10 jafnt dreifðar tölur í [5,7]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
<p>Þessi forritsbútur gæti t.d. prentað út:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[4.609 1.920 5.501 5.881 0.098 1.396 4.256 3.368]
[1 0 1 0 1 0 0 1 1 1 0 1 1 0 0 0 0 1 1 0 1 1 0 0 0]
[[0.828 0.632 0.758]
 [0.355 0.971 0.893]]
[5.230 6.008 6.918 6.901 6.270 5.640 5.465 5.651 6.614 6.931]
</pre></div>
</div>
<p>Normaldreifðu tölurnar hafa meðaltal 5 og staðalfrávik 2. Svo sjáum við að stiki númer 2 í <code class="docutils literal notranslate"><span class="pre">rng.integers</span></code> er einum stærri en stærsta heiltala sem fæst (öfugt við <code class="docutils literal notranslate"><span class="pre">randint</span></code> í kafla <a class="reference internal" href="#random-einingin"><span class="std std-numref">13.1</span></a>).</p>
<div class="aefing admonition">
<p class="admonition-title">Æfing:</p>
<p>Afritið sýnidæmið að framan inn í vinnubók og breytið því svo og dragið:</p>
<ol class="arabic simple">
<li><p><span class="math notranslate nohighlight">\(4 \times 4\)</span> fylki með tölum úr stöðluðu normaldreifingunni, N(0,1)</p></li>
<li><p>vigur með 7 tölum í <span class="math notranslate nohighlight">\(\{2,4,6,\ldots,100\}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(3 \times 3\)</span> fylki með tölum á bilinu <span class="math notranslate nohighlight">\([2,5]\)</span> með <code class="docutils literal notranslate"><span class="pre">rng.random</span></code></p></li>
<li><p><span class="math notranslate nohighlight">\(3 \times 3\)</span> fylki með tölum á bilinu <span class="math notranslate nohighlight">\([2,5]\)</span> með <code class="docutils literal notranslate"><span class="pre">rng.uniform</span></code></p></li>
</ol>
<p>Í lið 2 eru fyrst búnar til tölur í <span class="math notranslate nohighlight">\(\{1,2,\ldots,50\}\)</span> og niðurstaðan
margfölduð með 2, og í lið 3 er fyrst búið til fylki með tölum í
<span class="math notranslate nohighlight">\([0,1]\)</span> og svo þarf að margfalda með 3 og leggja 2 við.</p>
</div>
</section>
<section id="upphafsstilling-slembitalna">
<h2><span class="section-number">13.4  </span>Upphafsstilling slembitalna<a class="headerlink" href="#upphafsstilling-slembitalna" title="Permalink to this heading"></a></h2>
<p>Það getur komið sér vel að geta stillt slembitölugjafa þannig að það fáist
alltaf sama runa af slembitölum þegar forrit er keyrt aftur og aftur. Í
<strong>random</strong>-einingunni er það gert með fallinu <em>seed</em>, t.d. svona:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span><span class="p">,</span> <span class="n">seed</span>
<span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>Þessi bútur prentar alltaf sömu fimm tölurnar, 3, 1, 1, 3, 2 þegar hann er
keyrður aftur og aftur, en án seed fengjust alltaf nýjar og nýjar tölur. Fallið
default_rng í <strong>NumPy</strong> hefur valkvæðan stika sem nota má til frumstillingar,
svona:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">rng</span> <span class="pre">=</span> <span class="pre">np.random.default_rng(seed=42)</span></code></p>
</div></blockquote>
<div class="aefing admonition">
<p class="admonition-title">Æfing:</p>
<p>Prófið að keyra forritsbútinn hér á undan með öðru <em>seed</em>, og prófið líka að
sleppa frumstillingunni</p>
</div>
</section>
<section id="slembiro-og-slembiurtak">
<span id="slembiro"></span><h2><span class="section-number">13.5  </span>Slembiröð og slembiúrtak<a class="headerlink" href="#slembiro-og-slembiurtak" title="Permalink to this heading"></a></h2>
<p>Í æfingunni „Pókerhendur“ í kafla <a class="reference internal" href="#random-einingin"><span class="std std-numref">13.1</span></a> og framhaldi hennar
í <a class="reference internal" href="../verkefni/#poker"><span class="std std-numref">verkefni 35</span></a> sáum við gagnsemi þess að geta valið af handahófi
úr einhverju safni nokkur stök samtímis. Það er hægt með fallinu <code class="docutils literal notranslate"><span class="pre">sample</span></code> í
random-einingunni og NumPy býður líka upp á þennan möguleika með fallinu
<code class="docutils literal notranslate"><span class="pre">rng.choice</span></code>. Bæði random og NumPy eru líka með föll sem bæði heita
<code class="docutils literal notranslate"><span class="pre">shuffle</span></code> til að umraða lista/vigri í handahófsröð, líkt og þegar spil eru
stokkuð (<em>shuffled</em>). Þriðja aðgerðin sem stundum þarf er að skila tölunum
<span class="math notranslate nohighlight">\(0\)</span> til <span class="math notranslate nohighlight">\(n-1\)</span> í handahófsröð. Í NumPy er sérstakt fall til þess,
<code class="docutils literal notranslate"><span class="pre">permutation</span></code>, en með random þarf að nota <code class="docutils literal notranslate"><span class="pre">sample</span></code>. Hér er yfirlit yfir
þessi föll miðað við að L sé listi og x sé vigur:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">NumPy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">sample</span><span class="p">,</span> <span class="n">shuffle</span>
<span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">()</span>

<span class="n">H</span> <span class="o">=</span> <span class="n">sample</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>       <span class="c1"># H verður listi með n stökum völdum af handahófi úr L</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>   <span class="c1"># y verður vigur mð n stökum völdum af handahófi úr x</span>
<span class="n">shuffle</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>             <span class="c1"># stokkar listann L</span>
<span class="n">rng</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>         <span class="c1"># stokkar vigurinn x</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">),</span><span class="n">n</span><span class="p">)</span> <span class="c1"># P verður listi með tölunum 0 til n-1 í slembiröð</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">permutation</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="c1"># p verður vigur með tölunum 0 til n-1 í slembiröð</span>
</pre></div>
</div>
<div class="aefing admonition">
<p class="admonition-title">Æfing: Slembival og sembiröð</p>
<ol class="arabic">
<li><p>Raðið listanum <code class="docutils literal notranslate"><span class="pre">[&quot;Ari&quot;,</span> <span class="pre">&quot;Ása&quot;,</span> <span class="pre">&quot;Jói&quot;,</span> <span class="pre">&quot;Óli&quot;,</span> <span class="pre">&quot;Una&quot;]</span></code> í handahófsröð.</p></li>
<li><p>Veljið þrjá einstaklinga af handahófi úr listanum í lið 1</p></li>
<li><p>Lát <span class="math notranslate nohighlight">\(x_k = k + k^2, k = 1,\ldots 5\)</span>. Búið til vigur úr þessum
x-um með yfirgripi (<em>comprehension</em>) og raðið honum svo í slembiröð.</p></li>
<li><p>Gerið ráð fyrir að <code class="docutils literal notranslate"><span class="pre">spurning</span></code> sé listi af spurningum og <code class="docutils literal notranslate"><span class="pre">svar</span></code> sé
listi af tilsvarandi svörum. Notið <code class="docutils literal notranslate"><span class="pre">sample</span></code> (sbr. næstneðstu línuna í
töflunni) og yfirgrip til að raða spurningunum í handahófsröð og svörunum
í sömu röð. Prófið með:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">spurning</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Litur himinsins?&quot;</span><span class="p">,</span> <span class="s2">&quot;2+2?&quot;</span><span class="p">,</span> <span class="s2">&quot;Hver vann?&quot;</span><span class="p">,</span> <span class="s2">&quot;Er sól?&quot;</span><span class="p">]</span>
<span class="n">svar</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;blár&quot;</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="s2">&quot;Jói&quot;</span><span class="p">,</span> <span class="s2">&quot;nei&quot;</span><span class="p">]</span>
</pre></div>
</div>
</li>
</ol>
</div>
</section>
<section id="gervigogn">
<h2><span class="section-number">13.6  </span>Gervigögn<a class="headerlink" href="#gervigogn" title="Permalink to this heading"></a></h2>
<p>Eins og sagt var fremst í þessum <a class="reference internal" href="#slembitolur"><span class="std std-numref">13</span></a>. kafla er ein af
hagnýtingum slembitalna sú að búa til gervigögn. Við sáum dæmi um það þegar búin
voru til súlurit af normaldreifðum gögnum í <a class="reference internal" href="../kafli09/#teikning-me-matplotlib"><span class="std std-numref">9</span></a>.
kafla. Hér verður skoðað hvernig hægt er að búa til gervigögn til að útskýra
jöfnur bestu línu og bestu parabólu, sem unnið er með í <a class="reference internal" href="../verkefni/#jafna-bestu-linu"><span class="std std-numref">verkefni
25</span></a>, og auk þess jöfnu besta plans. Lesendur ættu að byrja á
að skoða <a class="reference internal" href="../verkefni/#jafna-bestu-linu"><span class="std std-numref">verkefni 25</span></a></p>
<p class="rubric">Besta parabóla</p>
<p>Eftirfarandi forritsbútur býr til 100 punkta gervigögn sem mætti lýsa með parabólu sem
hefur hágildi nálægt x = 10. Þau eru búin til með því að byrja með nákvæm gildi
parabólunnar <span class="math notranslate nohighlight">\(y = 100 - (x - 10)^2\)</span> í x-gildum sem valin eru af handahófi á bilinu
<span class="math notranslate nohighlight">\([2,18]\)</span>, en svo er bætt við þau normaldreifðri slembiviðbót með meðaltal
0 og staðalfrávik 10, <span class="math notranslate nohighlight">\(\Delta \sim N(0,10)\)</span>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
<span class="n">yp</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">10</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
<span class="n">delta</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">yp</span> <span class="o">+</span> <span class="n">delta</span>
</pre></div>
</div>
<p>Hér er svo forrit til að ákvarða bestu parabólu og teikna hana ásamt punktunum.
Import- og teiknistillingarskipunum hefur verið sleppt. Myndin sem teiknast
fylgir í kjölfarið. Dæmið sýnir hvernig hægt er að fá tvær hlutmyndir hlið við
hlið, en á það var lauslega minnst í <a class="reference internal" href="../verkefni/#korfuboltamenn"><span class="std std-numref">verkefni 27</span></a>.
Hágildispunkturinn sem prentaður er út fæst auðveldlega með því að diffra jöfnu
parabólunnar og setja sama sem núll.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">plottapunkta</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">k</span><span class="p">):</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">k</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;darkblue&#39;</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">18</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>

<span class="n">plottapunkta</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plottapunkta</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">)</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">deg</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="n">X</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">b</span><span class="o">*</span><span class="n">X</span> <span class="o">+</span> <span class="n">c</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;tomato&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">2.5</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Stærsta gildið er í x = </span><span class="si">{</span><span class="o">-</span><span class="n">b</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">a</span><span class="p">)</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../_images/parabóla-gervigögn.jpg"><img alt="../_images/parab%C3%B3la-gervig%C3%B6gn.jpg" src="../_images/parab%C3%B3la-gervig%C3%B6gn.jpg" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">Mynd 13.1: </span><span class="caption-text">Gervigögn ásamt bestu (minnstu kvaðrata) parabólu</span><a class="headerlink" href="#id1" title="Varanlegur hlekkur á þessa mynd"></a></p>
</figcaption>
</figure>
<p>Það má hugsa sér allskyns alvörugögn sem þessir punktar gætu lýst. Hér eru örfá dæmi:</p>
<ul class="simple">
<li><p>Vaxtarhraði plöntu eftir því hvað hún er vökvuð mikið</p></li>
<li><p>Suðutími til að fá fullkomin egg að mati 10 manns. Hver þeirra sýður 10 egg
í mislangan tíma og gefur útkomunni einkunn.</p></li>
<li><p>Heilbrigði eftir magni einhvers mikilvægs hormóns eða vítamíns í blóði.</p></li>
</ul>
<p>Fyrir flóknari gögn má líka búa til margliður af hærra stigi.</p>
<div class="aefing admonition">
<p class="admonition-title">Æfing: Besta 3. stigs margliða</p>
<p>Búið til 100 punkta gervigögn fyrir fallið <span class="math notranslate nohighlight">\(y = x(x - 2)(x - 4)\)</span> á
bilinu <span class="math notranslate nohighlight">\([0,4]\)</span>, finnið 3. stigs feril og teiknið hann og gögnin. Hér
þarf að nota lægra staðalfrávik á <span class="math notranslate nohighlight">\(\Delta\)</span> en að ofan, t.d.
<span class="math notranslate nohighlight">\(\Delta = 0.1\)</span></p>
</div>
<p class="rubric">Besta lína: Trjávöxtur</p>
<p>Í reitnum hér á eftir eru búin til gervigögn sem gætu lýst hæð 5–15 ára trjáa sem falli af aldri þeirra. Trén hækka um u.þ.b. einn metra á ári. Ef <span class="math notranslate nohighlight">\(h_i\)</span> og <span class="math notranslate nohighlight">\(x_i\)</span> eru hæð og aldur <span class="math notranslate nohighlight">\(i\)</span>-ta trésins þá má nota formúluna:</p>
<div class="math notranslate nohighlight">
\[h_i = a + b x_i + \varepsilon_i\;(a = 0.5, b = 1, \varepsilon \sim N(0,1))\]</div>
<figure class="align-right" id="id2">
<a class="reference internal image-reference" href="../_images/hæð-trjáa-eftir-aldri.jpg"><img alt="../_images/h%C3%A6%C3%B0-trj%C3%A1a-eftir-aldri.jpg" src="../_images/h%C3%A6%C3%B0-trj%C3%A1a-eftir-aldri.jpg" style="width: 8cm;" /></a>
<figcaption>
<p><span class="caption-number">Mynd 13.2: </span><span class="caption-text">Hæð trjáa eftir aldri</span><a class="headerlink" href="#id2" title="Varanlegur hlekkur á þessa mynd"></a></p>
</figcaption>
</figure>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">aldur</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">eps</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span>
<span class="n">hæð</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="mi">1</span><span class="o">*</span><span class="n">aldur</span> <span class="o">+</span> <span class="n">eps</span>
<span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">aldur</span><span class="p">,</span> <span class="n">hæð</span><span class="p">,</span> <span class="n">deg</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">15</span><span class="p">)</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="n">X</span> <span class="o">+</span> <span class="n">b</span>
</pre></div>
</div>
<p>Hér til hægri er mynd sem gæti komið út úr <code class="docutils literal notranslate"><span class="pre">plt.scatter(aldur,</span> <span class="pre">hæð)</span></code> og <code class="docutils literal notranslate"><span class="pre">plt.plot(X,Y)</span></code> ásamt nokkrum skipunum til að stilla teikninguna, merkja ása o.fl.</p>
<p class="rubric">Besta plan: Tré vaxa hægar í fjöllum</p>
<p>Hugsum okkur nú að tré sem vaxa á fjöllum séu lægri en þau sem eru við sjávarmál (sem er ábyggilega rétt), og munurinn sé u.þ.b. 1 m fyrir hverja 100 m sem þau standar hærra í brekkunni (en það er bara skáldskapur). Þá mætti nota formúluna:</p>
<div class="math notranslate nohighlight">
\[h_i = a + b x_i + c y_i + \varepsilon_i\; (a = 0.5, b = 1, c = 0.01, \varepsilon \sim N(0,1)),\]</div>
<p>þar sem <span class="math notranslate nohighlight">\(h_i\)</span> og <span class="math notranslate nohighlight">\(x_i\)</span> eru hæð og aldur eins og fyrr og <span class="math notranslate nohighlight">\(y_i\)</span>
er hæð yfir sjó. Hér er forritsbútur til að smíða og teikna svona gögn. Aftur
sleppum við ýmsum stillingar- og merkingarskipunum, en höfum samt með <code class="docutils literal notranslate"><span class="pre">clim</span></code>
sem ekki hefur sést áður og stillir efri og neðri mörk á litaskalanum:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">aldur</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">hys</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">eps</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">hæð</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="mi">1</span><span class="o">*</span><span class="n">aldur</span> <span class="o">-</span> <span class="mf">0.01</span><span class="o">*</span><span class="n">hys</span> <span class="o">+</span> <span class="n">eps</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">aldur</span><span class="p">,</span> <span class="n">hæð</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">hys</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">clim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">400</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="id3">
<a class="reference internal image-reference" href="../_images/tré-á-fjöllum.jpg"><img alt="../_images/tr%C3%A9-%C3%A1-fj%C3%B6llum.jpg" src="../_images/tr%C3%A9-%C3%A1-fj%C3%B6llum.jpg" style="width: 9cm;" /></a>
<figcaption>
<p><span class="caption-number">Mynd 13.3: </span><span class="caption-text">Hæð trjáa eftir aldri og hys</span><a class="headerlink" href="#id3" title="Varanlegur hlekkur á þessa mynd"></a></p>
</figcaption>
</figure>
<p>Þessum gögnum er hvorki hægt að lýsa með beinni línu eða parabólu heldur þarf plan með formúlu:</p>
<div class="math notranslate nohighlight">
\[h = a + bx + cy.\]</div>
<p>Til að finna besta plan af þessu tagi í skilningi minnstu kvaðrata dugar ekki
polyfit heldur þarf annan pakka sem nefnist <code class="docutils literal notranslate"><span class="pre">statsmodels</span></code>, eins og hér er sýnt:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="nn">sm</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">aldur</span><span class="p">,</span> <span class="n">hys</span><span class="p">])</span><span class="o">.</span><span class="n">T</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">hæð</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span>  <span class="c1"># OLS = ordinary least squares</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">)</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">params</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;a=</span><span class="si">{</span><span class="n">a</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">, b=</span><span class="si">{</span><span class="n">b</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">, c=</span><span class="si">{</span><span class="n">c</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># prentar út: a=0.579, b=0.986, c=-0.0096</span>
</pre></div>
</div>
<div class="aefing admonition">
<p class="admonition-title">Æfing: Hæð körfuboltamanna</p>
<p>Búið til línulegt líkan (besta plan) sem lýsir hæð körfuboltamanna í skránni
<a class="reference external" href="https://cs.hi.is/python/karfa.txt">https://cs.hi.is/python/karfa.txt</a> sem fall af aldri og þyngd (skráin er með þrjá
talnadálka með aldri, hæð og þyngd, og án hauslínu, og hana má lesa með
<code class="docutils literal notranslate"><span class="pre">np.loadtxt</span></code>). Prentið niðurstöðu með eftirfarandi sniði:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">Módelið</span> <span class="pre">er:</span> <span class="pre">hæð</span> <span class="pre">=</span> <span class="pre">160.x</span> <span class="pre">–</span> <span class="pre">x.xx*aldur</span> <span class="pre">+</span> <span class="pre">x.xx*þyngd</span></code></p>
</div></blockquote>
<p>Prófið líka að prenta <code class="docutils literal notranslate"><span class="pre">result.summary()</span></code></p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../kafli12/" class="btn btn-neutral float-left" title="12 Dæmi um hagnýtingu fylkjareikninga" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../kafli14/" class="btn btn-neutral float-right" title="14 Millikafli: Um reiknifræði og gagnavísindi" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

<style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search,
    .wy-nav-top {
        background: #10099F;
    }

    /* Sidebar */
    .wy-nav-side {
        background: #262626;
    }
</style>




</body>
</html>